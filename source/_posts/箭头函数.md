---
title: 箭头函数
date: 2016-12-03 15:55:59
tags:
---
熟悉后端的人对于箭头函数应该不会陌生，在 `C#` 中它叫做 `Lambda表达式`，其他的后端语言中也一直都有他的身影。
箭头函数是ES6新加入的一个重要特性，它简洁明了的书写方式大大的简化了我们平时代码。下面我们看一下箭头函数的特性。
<!-- more -->

### 箭头函数的特性

* 自动返回
* 不会绑定自己的 `this`
* 书写更加方便
* 不会绑定 `arguments`
* 无法使用 `prototype`
* 无法使用 `new` 关键字
* 在创建是初始化 `this` 而非调用时指定




### 自动返回

```js
// 写法一
var fn = a => a + 1

// 写法二
var fn2 = (a, b) => a + b

// 写法三
var fn3 = (a, b) => (a + b)

// 写法四
var fn4 = (a, b) => {
    // do something
    return a + b
}
```

当 `参数` 只有一个的时候，可以省略参数外面的 `()`;
当函数的表达式只有一句时，可以直接书写在 `=>` 后面，表示返回该表达式；也可以在表达式外加上一对 `()`返回，一般用于返回 `字面量` 和 `提升优先级`。
如果逻辑处理过长，则使用 `写法四` 书写，该写法不会自动返回，需手动指定返回内容。

### 不会绑定自己的 `this`

```js
document.body.onclick = () => console.log(this)

// this => window

document.body.onclick = function () {
    console.log(this)
}

// this => body
```

### 不会绑定 `arguments`

```js

var arguments = 'arguments';
var fn = () => console.log(arguments)

// arguments => 'arguments'

```

### 无法使用 `prototype`

```js
var fn = () => {
    console.log('fn')
}

console.log(fn.prototype)
// fn.prototype => undefined
// 箭头函数没有 prototype 原型链
```

### 无法使用 `new` 关键字

```js

var fn = () => {
    console.log('fn')
}

var f = new fn()

// Uncaught TypeError: fn is not a constructor
// 函数 fn 不是一个构造器
```


以上就是箭头函数的所有特性了。

### 在创建是初始化 `this` 而非调用时指定

```js
// 非箭头函数
var obj = {
    fn: function () {
        return function () {
            console.log(this)
        }
    }
}

var f = obj.fn();
var res = f(); // -> window

```

```js
// 箭头函数
var obj = {
    fn: function () {
        return () => {
            console.log(this)
        }
    }
}

var f = obj.fn();
var res = f(); // -> obj
```